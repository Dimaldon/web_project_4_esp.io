!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},o.apply(this,arguments)}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(f,e);var t,l,c,u,s=(c=f,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=a(c);if(u){var r=a(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function f(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),s.call(this,e)}return t=f,(l=[{key:"handleOverlay",value:function(e,t){this.imagePreview=document.querySelector(".overlay__preview-image"),this.imagePreview.src=e,this.imagePreview.alt=t,this.imageCaption=document.querySelector(".overlay__preview-caption"),this.imageCaption.textContent=t,o(a(f.prototype),"handleOverlay",this).call(this)}}])&&r(t.prototype,l),Object.defineProperty(t,"prototype",{writable:!1}),f}(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.overlayElement=t}var n,r;return n=e,(r=[{key:"handleOverlay",value:function(){this.overlayElement.classList.toggle("overlay__visible")}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this._identificaOverlayAbierto()&&this.handleOverlay()}},{key:"_identificaOverlayAbierto",value:function(){return this.overlayElement.className.indexOf("overlay__visible")>-1}},{key:"setEventListeners",value:function(){var e=this;this.overlayElement.addEventListener("click",(function(t){t.target!==e.overlayElement&&-1==t.target.className.indexOf("overlay__form-close-button")||e._identificaOverlayAbierto()&&e.handleOverlay()}))}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}());function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===c(o)?o:String(o)),r)}var o}var s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.link=t,this.name=n}var t,n;return t=e,(n=[{key:"_handleLike",value:function(){this.btnLike.classList.toggle("content__elements__button-like-active")}},{key:"_deleteCard",value:function(){this.element.remove()}},{key:"_setEvents",value:function(){var e=this;this.btnLike.addEventListener("click",(function(){e._handleLike()})),this.btnDelete.addEventListener("click",(function(){e._deleteCard()})),this.cardImage.onclick=function(){var t=document.querySelector("#overlayCardPreview");new l(t).handleOverlay(e.link,e.name)}}},{key:"generateCard",value:function(){var e=document.querySelector(".card__template");return this.cardItem=e.content.cloneNode(!0),this.element=this.cardItem.querySelector(".elements"),this.cardImage=this.element.querySelector(".content__elements-image"),this.cardTitle=this.element.querySelector(".content__elements-title"),this.btnLike=this.element.querySelector(".content__elements__button-like"),this.btnDelete=this.cardItem.querySelector(".content__elements__delete-button"),this.cardImage.src=this.link,this.cardTitle.textContent=this.name,this._setEvents(),this.element}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function m(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===f(t)?t:String(t)}var v=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"_showInputError",(function(e,t){r.errorElement=r.eValidateForm.querySelector(".".concat(e.id,"-error")),e.classList.add("form__input_type_error"),r.errorElement.textContent=t,r.errorElement.classList.add("form__input-error_active")})),m(this,"_hideInputError",(function(e){r.errorElement=r.eValidateForm.querySelector(".".concat(e.id,"-error")),e.classList.remove("form__input_type_error"),r.errorElement.classList.remove("form__input-error_active"),r.errorElement.textContent=""})),m(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),m(this,"_hasInvalidInput",(function(){return r.inputList.some((function(e){return!e.validity.valid}))})),m(this,"_toggleButtonState",(function(){r._hasInvalidInput()?(r.buttonElement.classList.add("overlay__form-button-disabled"),r.buttonElement.disabled=!0):(r.buttonElement.classList.remove("overlay__form-button-disabled"),r.buttonElement.disabled=!1)})),m(this,"_setEventListeners",(function(){var e=r;r.inputList=Array.from(r.eValidateForm.querySelectorAll(r.oValidateInputs.input)),r.buttonElement=r.eValidateForm.querySelector(r.oValidateInputs.button),r._toggleButtonState(),r.inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))})),this.oValidateInputs=t,this.eValidateForm=n}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this.eValidateForm.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function p(e){document.querySelector(e).classList.toggle("overlay__visible")}function b(){return document.getElementsByClassName("overlay__visible").length>0?document.getElementsByClassName("overlay__visible")[0].id:null}document.querySelector(".content__profile-button-edit").addEventListener("click",(function(){p("#overlay__profile-edit")})),document.querySelector(".content__profile-button-add").addEventListener("click",(function(){p("#overlay__card-add")})),document.querySelectorAll(".overlay").forEach((function(e){e.addEventListener("click",(function(t){t.target!==e&&-1==t.target.className.indexOf("overlay__form-close-button")||null!=b()&&p("#"+b())}))})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&null!=b()&&p("#"+b())}));var _=[{name:"Valle de Yosemite",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lago Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Monta√±as Calvas",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Parque Nacional de la Vanoise",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],h=document.querySelector("#overlay__form-name"),g=document.querySelector("#overlay__form-job"),S=document.querySelector(".content__profile-title"),E=document.querySelector(".content__profile-description"),w=document.querySelector("#overlay__form-place"),k=document.querySelector("#overlay__form-imageURL"),O=document.querySelector(".content__elements-grid");document.querySelector("#profileForm").addEventListener("submit",(function(e){e.preventDefault(),S.textContent=h.value,E.textContent=g.value,p("#overlay__profile-edit")})),document.querySelector("#imageForm").addEventListener("submit",(function(e){e.preventDefault();var t=new s(k.value,w.value);O.prepend(t.generateCard()),p("#overlay__card-add")})),function(){var e=document.querySelector(".content__elements-grid");_.forEach((function(t){var n=new s(t.link,t.name);e.append(n.generateCard())})),Array.from(document.querySelectorAll(".overlay__form")).forEach((function(e){new v({input:".overlay__text-input",button:".overlay__form-submit-button"},e).enableValidation()}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNRLEdBQ3BCLElBQU1TLEVBQU8sSUFBSTVELEVBQUttRCxFQUFLM0UsS0FBTTJFLEVBQUsxRSxNQUV0Q2tGLEVBQUtJLE9BQU9ILEVBQUtFLGVBQ25CLElBTWlCekIsTUFBTUMsS0FBSzFELFNBQVMyRCxpQkFBaUIsbUJBQzdDSSxTQUFRLFNBQUNxQixHQUNPLElBQUloRCxFQUN6QixDQUNFd0IsTUFBTyx1QkFDUEMsT0FBUSxnQ0FFVnVCLEdBRWFDLGtCQUNqQixHQWRGLENBaUJBQyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AuaW8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC5pby8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLmlvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC5pby8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AuaW8vLi9zcmMvY29tcG9uZW50cy91dGlscy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC5pby8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihvdmVybGF5RWxlbWVudCkge1xuICAgIHN1cGVyKG92ZXJsYXlFbGVtZW50KTtcbiAgfVxuXG4gIGhhbmRsZU92ZXJsYXkobGluaywgbmFtZSkge1xuICAgIHRoaXMuaW1hZ2VQcmV2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5X19wcmV2aWV3LWltYWdlXCIpO1xuICAgIHRoaXMuaW1hZ2VQcmV2aWV3LnNyYyA9IGxpbms7XG4gICAgdGhpcy5pbWFnZVByZXZpZXcuYWx0ID0gbmFtZTtcbiAgICB0aGlzLmltYWdlQ2FwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheV9fcHJldmlldy1jYXB0aW9uXCIpO1xuICAgIHRoaXMuaW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5oYW5kbGVPdmVybGF5KCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Iob3ZlcmxheUVsZW1lbnQpIHtcbiAgICB0aGlzLm92ZXJsYXlFbGVtZW50ID0gb3ZlcmxheUVsZW1lbnQ7XG4gIH1cblxuICBoYW5kbGVPdmVybGF5KCkge1xuICAgIHRoaXMub3ZlcmxheUVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShcIm92ZXJsYXlfX3Zpc2libGVcIik7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLl9pZGVudGlmaWNhT3ZlcmxheUFiaWVydG8oKSA/IHRoaXMuaGFuZGxlT3ZlcmxheSgpIDogbnVsbDtcbiAgICB9XG4gIH1cblxuICBfaWRlbnRpZmljYU92ZXJsYXlBYmllcnRvKCkge1xuICAgIHJldHVybiB0aGlzLm92ZXJsYXlFbGVtZW50LmNsYXNzTmFtZS5pbmRleE9mKFwib3ZlcmxheV9fdmlzaWJsZVwiKSA+IC0xO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5vdmVybGF5RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIGV2ZW50LnRhcmdldCAhPT0gdGhpcy5vdmVybGF5RWxlbWVudCAmJlxuICAgICAgICBldmVudC50YXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoXCJvdmVybGF5X19mb3JtLWNsb3NlLWJ1dHRvblwiKSA9PSAtMVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2lkZW50aWZpY2FPdmVybGF5QWJpZXJ0bygpID8gdGhpcy5oYW5kbGVPdmVybGF5KCkgOiBudWxsO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4vUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihsaW5rLCBuYW1lKSB7XG4gICAgdGhpcy5saW5rID0gbGluaztcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICB9XG5cbiAgX2hhbmRsZUxpa2UoKSB7XG4gICAgdGhpcy5idG5MaWtlLmNsYXNzTGlzdC50b2dnbGUoXCJjb250ZW50X19lbGVtZW50c19fYnV0dG9uLWxpa2UtYWN0aXZlXCIpO1xuICB9XG5cbiAgX2RlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5lbGVtZW50LnJlbW92ZSgpO1xuICB9XG5cbiAgX3NldEV2ZW50cygpIHtcbiAgICB0aGlzLmJ0bkxpa2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2UoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuYnRuRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9kZWxldGVDYXJkKCk7XG4gICAgfSk7XG4gICAgdGhpcy5jYXJkSW1hZ2Uub25jbGljayA9ICgpID0+IHtcbiAgICAgIGNvbnN0IG92ZXJsYXlDYXJkUHJldmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3ZlcmxheUNhcmRQcmV2aWV3XCIpO1xuICAgICAgY29uc3QgcG9wdXBJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShvdmVybGF5Q2FyZFByZXZpZXcpO1xuICAgICAgcG9wdXBJbWFnZS5oYW5kbGVPdmVybGF5KHRoaXMubGluaywgdGhpcy5uYW1lKTtcbiAgICB9O1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGVtcGxhdGVcIik7XG4gICAgdGhpcy5jYXJkSXRlbSA9IGNhcmRUZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgICB0aGlzLmVsZW1lbnQgPSB0aGlzLmNhcmRJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNcIik7XG4gICAgdGhpcy5jYXJkSW1hZ2UgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19lbGVtZW50cy1pbWFnZVwiKTtcbiAgICB0aGlzLmNhcmRUaXRsZSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX2VsZW1lbnRzLXRpdGxlXCIpO1xuICAgIHRoaXMuYnRuTGlrZSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuY29udGVudF9fZWxlbWVudHNfX2J1dHRvbi1saWtlXCJcbiAgICApO1xuICAgIHRoaXMuYnRuRGVsZXRlID0gdGhpcy5jYXJkSXRlbS5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuY29udGVudF9fZWxlbWVudHNfX2RlbGV0ZS1idXR0b25cIlxuICAgICk7XG4gICAgdGhpcy5jYXJkSW1hZ2Uuc3JjID0gdGhpcy5saW5rO1xuICAgIHRoaXMuY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5uYW1lO1xuICAgIHRoaXMuX3NldEV2ZW50cygpO1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihvVmFsaWRhdGVJbnB1dHMsIGVWYWxpZGF0ZUZvcm0pIHtcbiAgICB0aGlzLm9WYWxpZGF0ZUlucHV0cyA9IG9WYWxpZGF0ZUlucHV0cztcbiAgICB0aGlzLmVWYWxpZGF0ZUZvcm0gPSBlVmFsaWRhdGVGb3JtO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSA9PiB7XG4gICAgdGhpcy5lcnJvckVsZW1lbnQgPSB0aGlzLmVWYWxpZGF0ZUZvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIpO1xuICAgIHRoaXMuZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIHRoaXMuZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmVcIik7XG4gIH07XG5cbiAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIHRoaXMuZXJyb3JFbGVtZW50ID0gdGhpcy5lVmFsaWRhdGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiKTtcbiAgICB0aGlzLmVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIpO1xuICAgIHRoaXMuZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgfTtcblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9O1xuXG4gIF9oYXNJbnZhbGlkSW5wdXQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH07XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJvdmVybGF5X19mb3JtLWJ1dHRvbi1kaXNhYmxlZFwiKTtcbiAgICAgIHRoaXMuYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwib3ZlcmxheV9fZm9ybS1idXR0b24tZGlzYWJsZWRcIik7XG4gICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgIGNvbnN0IGZ2ID0gdGhpcztcbiAgICB0aGlzLmlucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLmVWYWxpZGF0ZUZvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLm9WYWxpZGF0ZUlucHV0cy5pbnB1dClcbiAgICApO1xuICAgIHRoaXMuYnV0dG9uRWxlbWVudCA9IHRoaXMuZVZhbGlkYXRlRm9ybS5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5vVmFsaWRhdGVJbnB1dHMuYnV0dG9uXG4gICAgKTtcblxuICAgIC8vZGVzYWN0aXZhIGVsIGJvdG9uIGRlIHN1Ym1pdFxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICAvL2FncmVnYSBsb3MgZXZlbnRvcyBkZSBlc2N1Y2hhIGEgY2FkYSBpbnB1dFxuICAgIHRoaXMuaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ2Ll9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgZnYuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuZVZhbGlkYXRlRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgLy9lc3RhYmxlY2UgbG9zIGV2ZW50b3MgZGUgZXNjdWNoYSBwYXJhIGNhZGEgZm9ybXVsYXJpb1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBoYW5kbGVPdmVybGF5KGlkKSB7XG4gIGNvbnN0IG92ZXJsYXlFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpZCk7XG4gIG92ZXJsYXlFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoXCJvdmVybGF5X192aXNpYmxlXCIpO1xufVxuXG4vLyBhYnJpciBmb3JtdWxhcmlvIGRlbCBwZXJmaWxcbmRvY3VtZW50XG4gIC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX3Byb2ZpbGUtYnV0dG9uLWVkaXRcIilcbiAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgaGFuZGxlT3ZlcmxheShcIiNvdmVybGF5X19wcm9maWxlLWVkaXRcIik7XG4gIH0pO1xuXG4vLyBhYnJpciBwb3AtdXAgZGUgbnVldm8gbHVnYXJcbmRvY3VtZW50XG4gIC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX3Byb2ZpbGUtYnV0dG9uLWFkZFwiKVxuICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBoYW5kbGVPdmVybGF5KFwiI292ZXJsYXlfX2NhcmQtYWRkXCIpO1xuICB9KTtcblxuLy8gY2llcnJlIGNvbiB0ZWNsYSBYXG5jb25zdCBvdmVybGF5cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIub3ZlcmxheVwiKTtcbm92ZXJsYXlzLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgaWYgKFxuICAgICAgZXZlbnQudGFyZ2V0ICE9PSBpdGVtICYmXG4gICAgICBldmVudC50YXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoXCJvdmVybGF5X19mb3JtLWNsb3NlLWJ1dHRvblwiKSA9PSAtMVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZGVudGlmaWNhT3ZlcmxheUFiaWVydG8oKSAhPSBudWxsXG4gICAgICA/IGhhbmRsZU92ZXJsYXkoXCIjXCIgKyBpZGVudGlmaWNhT3ZlcmxheUFiaWVydG8oKSlcbiAgICAgIDogbnVsbDtcbiAgfSk7XG59KTtcblxuLy8gY2llcnJlIGNvbiB0ZWNsYSBlc2NhcGVcbmNvbnN0IGtleWRvd25MaXN0ZW5lciA9IChldmVudCkgPT4ge1xuICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgaWRlbnRpZmljYU92ZXJsYXlBYmllcnRvKCkgIT0gbnVsbFxuICAgICAgPyBoYW5kbGVPdmVybGF5KFwiI1wiICsgaWRlbnRpZmljYU92ZXJsYXlBYmllcnRvKCkpXG4gICAgICA6IG51bGw7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGlkZW50aWZpY2FPdmVybGF5QWJpZXJ0bygpIHtcbiAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJvdmVybGF5X192aXNpYmxlXCIpLmxlbmd0aCA+IDBcbiAgICA/IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJvdmVybGF5X192aXNpYmxlXCIpWzBdLmlkXG4gICAgOiBudWxsO1xufVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBrZXlkb3duTGlzdGVuZXIpO1xuIiwiaW1wb3J0IFwiLi9wYWdlL2luZGV4LmNzc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCB7IGhhbmRsZU92ZXJsYXkgfSBmcm9tIFwiLi9jb21wb25lbnRzL3V0aWxzXCI7XG4vL3ZhcmlhYmxlIHF1ZSBhbG1hY2VuYSBlbCBhcnJheSBkZSBvYmpldG9zIGNvbiBsYXMgNiBjYXJkcyBpbmljaWFsZXNcbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAgICB7XG4gICAgICBuYW1lOiBcIlZhbGxlIGRlIFlvc2VtaXRlXCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogXCJMYWdvIExvdWlzZVwiLFxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6IFwiTW9udGHDsWFzIENhbHZhc1wiLFxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogXCJQYXJxdWUgTmFjaW9uYWwgZGUgbGEgVmFub2lzZVwiLFxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxuICAgIH0sXG4gIF0sXG4gIG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3ZlcmxheV9fZm9ybS1uYW1lXCIpLFxuICBqb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3ZlcmxheV9fZm9ybS1qb2JcIiksXG4gIG5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19wcm9maWxlLXRpdGxlXCIpLFxuICBqb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19wcm9maWxlLWRlc2NyaXB0aW9uXCIpLFxuICBwbGFjZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5X19mb3JtLXBsYWNlXCIpLFxuICBpbWFnZVVybElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5X19mb3JtLWltYWdlVVJMXCIpLFxuICBncmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19lbGVtZW50cy1ncmlkXCIpO1xuLy8gcG9wLXVwIGNhcmQgcHJldmlld1xuZG9jdW1lbnRcbiAgLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZUZvcm1cIilcbiAgLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xuXG5kb2N1bWVudFxuICAucXVlcnlTZWxlY3RvcihcIiNpbWFnZUZvcm1cIilcbiAgLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlSW1hZ2VGb3JtU3VibWl0KTtcblxuLy8gcG9wLXVwIGVkaXQgcHJvZmlsZVxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBuYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWVJbnB1dC52YWx1ZTtcbiAgam9iRWxlbWVudC50ZXh0Q29udGVudCA9IGpvYklucHV0LnZhbHVlO1xuICBoYW5kbGVPdmVybGF5KFwiI292ZXJsYXlfX3Byb2ZpbGUtZWRpdFwiKTtcbn1cblxuLy8gcG9wLXVwIGFkZCBuZXcgcGxhY2VcbmZ1bmN0aW9uIGhhbmRsZUltYWdlRm9ybVN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGltYWdlVXJsSW5wdXQudmFsdWUsIHBsYWNlSW5wdXQudmFsdWUpO1xuICBncmlkLnByZXBlbmQoY2FyZC5nZW5lcmF0ZUNhcmQoKSk7XG5cbiAgaGFuZGxlT3ZlcmxheShcIiNvdmVybGF5X19jYXJkLWFkZFwiKTtcbn1cblxuLy8gY29kaWdvIGRlIGxhIGdhbGVyaWFcbmZ1bmN0aW9uIHJlbmRlckdhbGxlcnkoKSB7XG4gIC8vb2J0ZW5lciBncmlkIGRlIGxhIGdhbGVyaWFcbiAgY29uc3QgZ3JpZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudF9fZWxlbWVudHMtZ3JpZFwiKTtcbiAgLy9jcmVhIGVsIGdyaWQgZGUgbGEgZ2FsZXJpYVxuICBpbml0aWFsQ2FyZHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLmxpbmssIGl0ZW0ubmFtZSk7XG4gICAgLy9hZ3JlZ2FsbyBhbCBncmlkIGRlc2RlIGVsIG9iamV0byBjYXJkLCBsbGFtYW5kbyBhbCBtZXRvZG8gZ2VuZXJhdGVDYXJkXG4gICAgZ3JpZC5hcHBlbmQoY2FyZC5nZW5lcmF0ZUNhcmQoKSk7XG4gIH0pO1xuICBlbmFibGVWYWxpZGF0aW9uKCk7XG59XG5cbi8vIGHDsWFkZSBhIHRvZG9zIGxvcyBmb3JtdWxhcmlvcyBsYSB2YWxpZGFjacOzbiBkZSBsYSBjbGFzZSBGb3JtVmFsaWRhdG9yXG5mdW5jdGlvbiBlbmFibGVWYWxpZGF0aW9uKCkge1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5vdmVybGF5X19mb3JtXCIpKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBvRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICAgICAge1xuICAgICAgICBpbnB1dDogXCIub3ZlcmxheV9fdGV4dC1pbnB1dFwiLFxuICAgICAgICBidXR0b246IFwiLm92ZXJsYXlfX2Zvcm0tc3VibWl0LWJ1dHRvblwiLFxuICAgICAgfSxcbiAgICAgIGZvcm1FbGVtZW50XG4gICAgKTtcbiAgICBvRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gIH0pO1xufVxuXG5yZW5kZXJHYWxsZXJ5KCk7XG4iXSwibmFtZXMiOlsiUG9wdXBXaXRoSW1hZ2UiLCJfUG9wdXAiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJvdmVybGF5RWxlbWVudCIsIl9jbGFzc0NhbGxDaGVjayIsImNhbGwiLCJrZXkiLCJ2YWx1ZSIsImxpbmsiLCJuYW1lIiwidGhpcyIsImltYWdlUHJldmlldyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInNyYyIsImFsdCIsImltYWdlQ2FwdGlvbiIsInRleHRDb250ZW50IiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsIlBvcHVwIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZXZlbnQiLCJfaWRlbnRpZmljYU92ZXJsYXlBYmllcnRvIiwiaGFuZGxlT3ZlcmxheSIsImNsYXNzTmFtZSIsImluZGV4T2YiLCJfdGhpcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJDYXJkIiwiYnRuTGlrZSIsImVsZW1lbnQiLCJyZW1vdmUiLCJfaGFuZGxlTGlrZSIsImJ0bkRlbGV0ZSIsIl9kZWxldGVDYXJkIiwiY2FyZEltYWdlIiwib25jbGljayIsIm92ZXJsYXlDYXJkUHJldmlldyIsImNhcmRUZW1wbGF0ZSIsImNhcmRJdGVtIiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmRUaXRsZSIsIl9zZXRFdmVudHMiLCJGb3JtVmFsaWRhdG9yIiwib1ZhbGlkYXRlSW5wdXRzIiwiZVZhbGlkYXRlRm9ybSIsIl9kZWZpbmVQcm9wZXJ0eSIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImNvbmNhdCIsImlkIiwiYWRkIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiaW5wdXRMaXN0Iiwic29tZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJidXR0b25FbGVtZW50IiwiZGlzYWJsZWQiLCJmdiIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dCIsImJ1dHRvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJpZGVudGlmaWNhT3ZlcmxheUFiaWVydG8iLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwibGVuZ3RoIiwiaXRlbSIsImluaXRpYWxDYXJkcyIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwibmFtZUVsZW1lbnQiLCJqb2JFbGVtZW50IiwicGxhY2VJbnB1dCIsImltYWdlVXJsSW5wdXQiLCJncmlkIiwiY2FyZCIsInByZXBlbmQiLCJnZW5lcmF0ZUNhcmQiLCJhcHBlbmQiLCJmb3JtRWxlbWVudCIsImVuYWJsZVZhbGlkYXRpb24iLCJyZW5kZXJHYWxsZXJ5Il0sInNvdXJjZVJvb3QiOiIifQ==