!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},o.apply(this,arguments)}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(f,e);var t,l,u,c,s=(u=f,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=a(u);if(c){var r=a(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function f(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),s.call(this,e)}return t=f,(l=[{key:"handleOverlay",value:function(e,t){this.imagePreview=document.querySelector(".overlay__preview-image"),this.imagePreview.src=e,this.imagePreview.alt=t,this.imageCaption=document.querySelector(".overlay__preview-caption"),this.imageCaption.textContent=t,o(a(f.prototype),"handleOverlay",this).call(this)}}])&&r(t.prototype,l),Object.defineProperty(t,"prototype",{writable:!1}),f}(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.overlayElement=t}var n,r;return n=e,(r=[{key:"handleOverlay",value:function(){this.overlayElement.classList.toggle("overlay__visible")}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this._identificaOverlayAbierto()&&this.handleOverlay()}},{key:"_identificaOverlayAbierto",value:function(){return this.overlayElement.className.indexOf("overlay__visible")>-1}},{key:"setEventListeners",value:function(){var e=this;this.overlayElement.addEventListener("click",(function(t){t.target!==e.overlayElement&&-1==t.target.className.indexOf("overlay__form-close-button")||e._identificaOverlayAbierto()&&e.handleOverlay()}))}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}());function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===u(o)?o:String(o)),r)}var o}var s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.link=t,this.name=n}var t,n;return t=e,(n=[{key:"_handleLike",value:function(){this.btnLike.classList.toggle("content__elements__button-like-active")}},{key:"_deleteCard",value:function(){this.element.remove()}},{key:"_setEvents",value:function(){var e=this;this.btnLike.addEventListener("click",(function(){e._handleLike()})),this.btnDelete.addEventListener("click",(function(){e._deleteCard()})),this.cardImage.onclick=function(){var t=document.querySelector("#overlayCardPreview");new l(t).handleOverlay(e.link,e.name)}}},{key:"generateCard",value:function(){var e=document.querySelector(".card__template");return this.cardItem=e.content.cloneNode(!0),this.element=this.cardItem.querySelector(".elements"),this.cardImage=this.element.querySelector(".content__elements-image"),this.cardTitle=this.element.querySelector(".content__elements-title"),this.btnLike=this.element.querySelector(".content__elements__button-like"),this.btnDelete=this.cardItem.querySelector(".content__elements__delete-button"),this.cardImage.src=this.link,this.cardTitle.textContent=this.name,this._setEvents(),this.element}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function y(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===f(t)?t:String(t)}var b=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"_showInputError",(function(e,t){r.errorElement=r.eValidateForm.querySelector(".".concat(e.id,"-error")),e.classList.add("form__input_type_error"),r.errorElement.textContent=t,r.errorElement.classList.add("form__input-error_active")})),y(this,"_hideInputError",(function(e){r.errorElement=r.eValidateForm.querySelector(".".concat(e.id,"-error")),e.classList.remove("form__input_type_error"),r.errorElement.classList.remove("form__input-error_active"),r.errorElement.textContent=""})),y(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),y(this,"_hasInvalidInput",(function(){return r.inputList.some((function(e){return!e.validity.valid}))})),y(this,"_toggleButtonState",(function(){r._hasInvalidInput()?(r.buttonElement.classList.add("overlay__form-button-disabled"),r.buttonElement.disabled=!0):(r.buttonElement.classList.remove("overlay__form-button-disabled"),r.buttonElement.disabled=!1)})),y(this,"_setEventListeners",(function(){var e=r;r.inputList=Array.from(r.eValidateForm.querySelectorAll(r.oValidateInputs.input)),r.buttonElement=r.eValidateForm.querySelector(r.oValidateInputs.button),r._toggleButtonState(),r.inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))})),this.oValidateInputs=t,this.eValidateForm=n}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this.eValidateForm.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function d(e){document.querySelector(e).classList.toggle("overlay__visible")}function p(){return document.getElementsByClassName("overlay__visible").length>0?document.getElementsByClassName("overlay__visible")[0].id:null}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===h(o)?o:String(o)),r)}var o}document.querySelector(".content__profile-button-edit").addEventListener("click",(function(){d("#overlay__profile-edit")})),document.querySelector(".content__profile-button-add").addEventListener("click",(function(){d("#overlay__card-add")})),document.querySelectorAll(".overlay").forEach((function(e){e.addEventListener("click",(function(t){t.target!==e&&-1==t.target.className.indexOf("overlay__form-close-button")||null!=p()&&d("#"+p())}))})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&null!=p()&&d("#"+p())}));var g=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseURL=t.baseUrl,this._headers=t.headers}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return fetch(this._baseURL+"/cards",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"getInitialUserMe",value:function(){return fetch(this._baseURL+"/users/me",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"patchInitialUserMe",value:function(e,t){return fetch(this._baseURL+"/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"postNewCard",value:function(e,t){return fetch(this._baseURL+"/cards",{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==S(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===S(o)?o:String(o)),r)}var o}var w=function(){function e(t){var n=t.nameElement,r=t.jobElement,o=t.imagenElement,i=t.name,a=t.job,l=t.imagen;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nameElement=n,this.jobElement=r,this.imagenElement=o,this.name=i,this.job=a,this.imagen=l}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this.name,job:this.job,imagen:this.imagen}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.job,r=e.imagen;this.name=t,this.job=n,this.imagen=r,this.nameElement.textContent=this.name,this.jobElement.textContent=this.job,this.imagenElement.src=this.imagen}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),j=document.querySelector("#overlay__form-name"),k=document.querySelector("#overlay__form-job"),O=document.querySelector(".content__profile-title"),P=document.querySelector(".content__profile-description"),L=document.querySelector("#overlay__form-place"),I=document.querySelector("#overlay__form-imageURL"),q=document.querySelector(".content__elements-grid"),C=document.querySelector(".content__profile-image"),T=new g({baseUrl:"https://around.nomoreparties.co/v1/web_es_cohort_03",headers:{authorization:"361c2497-73b4-4dd1-9a02-2225ff5963b5","Content-Type":"application/json"}});T.getInitialUserMe().then((function(e){var t=e.name,n=e.about,r=e.avatar,o=new w({nameElement:O,jobElement:P,imagenElement:C,name:t,job:n,imagen:r});o.setUserInfo(o.getUserInfo())})),document.querySelector("#profileForm").addEventListener("submit",(function(e){e.preventDefault(),T.patchInitialUserMe(j.value,k.value).then((function(e){var t=e.name,n=e.about,r=e.avatar,o=new w({nameElement:O,jobElement:P,imagenElement:C,name:t,job:n,imagen:r});o.setUserInfo(o.getUserInfo()),d("#overlay__profile-edit")}))})),document.querySelector("#imageForm").addEventListener("submit",(function(e){e.preventDefault(),T.postNewCard(L.value,I.value).then((function(e){var t=new s(e.link,e.name);q.prepend(t.generateCard()),d("#overlay__card-add")}))})),function(){var e=document.querySelector(".content__elements-grid");T.getInitialCards().then((function(t){t.forEach((function(t){var n=new s(t.link,t.name);e.append(n.generateCard())}))})),Array.from(document.querySelectorAll(".overlay__form")).forEach((function(e){new b({input:".overlay__text-input",button:".overlay__form-submit-button"},e).enableValidation()}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoiNDZEQUE0QixJQUNQQSxFQUFjLFNBQUFDLEkscVJBQUFDLENBQUFGLEVBQUFDLEdBQUEsSSxRQUFBRSxHLEVBQUFILEUscXJCQUNqQyxTQUFBQSxFQUFZSSxHQUFnQixPLDRGQUFBQyxDQUFBLEtBQUFMLEdBQUFHLEVBQUFHLEtBQUEsS0FDcEJGLEVBQ1IsQ0FTQyxPLEVBVEFKLEcsRUFBQSxFQUFBTyxJQUFBLGdCQUFBQyxNQUVELFNBQWNDLEVBQU1DLEdBQ2xCQyxLQUFLQyxhQUFlQyxTQUFTQyxjQUFjLDJCQUMzQ0gsS0FBS0MsYUFBYUcsSUFBTU4sRUFDeEJFLEtBQUtDLGFBQWFJLElBQU1OLEVBQ3hCQyxLQUFLTSxhQUFlSixTQUFTQyxjQUFjLDZCQUMzQ0gsS0FBS00sYUFBYUMsWUFBY1IsRUFDaENTLEVBQUFDLEVBQUFwQixFQUFBcUIsV0FBQSxzQkFBQWYsS0FBQSxLQUNGLE0sb0VBQUNOLENBQUEsQ0FaZ0MsQ0NEVCxXQUN4QixTQUFBc0IsRUFBWWxCLEksNEZBQWdCQyxDQUFBLEtBQUFpQixHQUMxQlgsS0FBS1AsZUFBaUJBLENBQ3hCLEMsUUEwQkMsTyxFQTFCQWtCLEcsRUFBQSxFQUFBZixJQUFBLGdCQUFBQyxNQUVELFdBQ0VHLEtBQUtQLGVBQWVtQixVQUFVQyxPQUFPLG1CQUN2QyxHQUFDLENBQUFqQixJQUFBLGtCQUFBQyxNQUVELFNBQWdCaUIsR0FDSSxXQUFkQSxFQUFNbEIsS0FDUkksS0FBS2UsNkJBQThCZixLQUFLZ0IsZUFFNUMsR0FBQyxDQUFBcEIsSUFBQSw0QkFBQUMsTUFFRCxXQUNFLE9BQU9HLEtBQUtQLGVBQWV3QixVQUFVQyxRQUFRLHFCQUF1QixDQUN0RSxHQUFDLENBQUF0QixJQUFBLG9CQUFBQyxNQUVELFdBQW9CLElBQUFzQixFQUFBLEtBQ2xCbkIsS0FBS1AsZUFBZTJCLGlCQUFpQixTQUFTLFNBQUNOLEdBRTNDQSxFQUFNTyxTQUFXRixFQUFLMUIsaUJBQzJDLEdBQWpFcUIsRUFBTU8sT0FBT0osVUFBVUMsUUFBUSwrQkFJakNDLEVBQUtKLDZCQUE4QkksRUFBS0gsZUFDMUMsR0FDRixNLG9FQUFDTCxDQUFBLENBN0J1QixJLG1xQkNBdUIsSUFDNUJXLEVBQUksV0FDdkIsU0FBQUEsRUFBWXhCLEVBQU1DLEksNEZBQU1MLENBQUEsS0FBQTRCLEdBQ3RCdEIsS0FBS0YsS0FBT0EsRUFDWkUsS0FBS0QsS0FBT0EsQ0FDZCxDLFFBeUNDLE8sRUF6Q0F1QixHLEVBQUEsRUFBQTFCLElBQUEsY0FBQUMsTUFFRCxXQUNFRyxLQUFLdUIsUUFBUVgsVUFBVUMsT0FBTyx3Q0FDaEMsR0FBQyxDQUFBakIsSUFBQSxjQUFBQyxNQUVELFdBQ0VHLEtBQUt3QixRQUFRQyxRQUNmLEdBQUMsQ0FBQTdCLElBQUEsYUFBQUMsTUFFRCxXQUFhLElBQUFzQixFQUFBLEtBQ1huQixLQUFLdUIsUUFBUUgsaUJBQWlCLFNBQVMsV0FDckNELEVBQUtPLGFBQ1AsSUFFQTFCLEtBQUsyQixVQUFVUCxpQkFBaUIsU0FBUyxXQUN2Q0QsRUFBS1MsYUFDUCxJQUNBNUIsS0FBSzZCLFVBQVVDLFFBQVUsV0FDdkIsSUFBTUMsRUFBcUI3QixTQUFTQyxjQUFjLHVCQUMvQixJQUFJZCxFQUFlMEMsR0FDM0JmLGNBQWNHLEVBQUtyQixLQUFNcUIsRUFBS3BCLEtBQzNDLENBQ0YsR0FBQyxDQUFBSCxJQUFBLGVBQUFDLE1BRUQsV0FDRSxJQUFNbUMsRUFBZTlCLFNBQVNDLGNBQWMsbUJBYzVDLE9BYkFILEtBQUtpQyxTQUFXRCxFQUFhRSxRQUFRQyxXQUFVLEdBQy9DbkMsS0FBS3dCLFFBQVV4QixLQUFLaUMsU0FBUzlCLGNBQWMsYUFDM0NILEtBQUs2QixVQUFZN0IsS0FBS3dCLFFBQVFyQixjQUFjLDRCQUM1Q0gsS0FBS29DLFVBQVlwQyxLQUFLd0IsUUFBUXJCLGNBQWMsNEJBQzVDSCxLQUFLdUIsUUFBVXZCLEtBQUt3QixRQUFRckIsY0FDMUIsbUNBRUZILEtBQUsyQixVQUFZM0IsS0FBS2lDLFNBQVM5QixjQUM3QixxQ0FFRkgsS0FBSzZCLFVBQVV6QixJQUFNSixLQUFLRixLQUMxQkUsS0FBS29DLFVBQVU3QixZQUFjUCxLQUFLRCxLQUNsQ0MsS0FBS3FDLGFBQ0VyQyxLQUFLd0IsT0FDZCxNLG9FQUFDRixDQUFBLENBN0NzQixHLG16QkNESmdCLEVBQWEsV0FDaEMsU0FBQUEsRUFBWUMsRUFBaUJDLEdBQWUsSUFBQXJCLEVBQUEsTSw0RkFBQXpCLENBQUEsS0FBQTRDLEdBQUFHLEVBQUEsd0JBSzFCLFNBQUNDLEVBQWNDLEdBQy9CeEIsRUFBS3lCLGFBQWV6QixFQUFLcUIsY0FBY3JDLGNBQWMsSUFBRDBDLE9BQzlDSCxFQUFhSSxHQUFFLFdBRXJCSixFQUFhOUIsVUFBVW1DLElBQUksMEJBQzNCNUIsRUFBS3lCLGFBQWFyQyxZQUFjb0MsRUFDaEN4QixFQUFLeUIsYUFBYWhDLFVBQVVtQyxJQUFJLDJCQUNsQyxJQUFDTixFQUFBLHdCQUVpQixTQUFDQyxHQUNqQnZCLEVBQUt5QixhQUFlekIsRUFBS3FCLGNBQWNyQyxjQUFjLElBQUQwQyxPQUM5Q0gsRUFBYUksR0FBRSxXQUVyQkosRUFBYTlCLFVBQVVhLE9BQU8sMEJBQzlCTixFQUFLeUIsYUFBYWhDLFVBQVVhLE9BQU8sNEJBQ25DTixFQUFLeUIsYUFBYXJDLFlBQWMsRUFDbEMsSUFBQ2tDLEVBQUEsNEJBRXFCLFNBQUNDLEdBQ2hCQSxFQUFhTSxTQUFTQyxNQUd6QjlCLEVBQUsrQixnQkFBZ0JSLEdBRnJCdkIsRUFBS2dDLGdCQUFnQlQsRUFBY0EsRUFBYVUsa0JBSXBELElBQUNYLEVBQUEseUJBRWtCLFdBQ2pCLE9BQU90QixFQUFLa0MsVUFBVUMsTUFBSyxTQUFDWixHQUMxQixPQUFRQSxFQUFhTSxTQUFTQyxLQUNoQyxHQUNGLElBQUNSLEVBQUEsMkJBRW9CLFdBQ2Z0QixFQUFLb0Msb0JBQ1BwQyxFQUFLcUMsY0FBYzVDLFVBQVVtQyxJQUFJLGlDQUNqQzVCLEVBQUtxQyxjQUFjQyxVQUFXLElBRTlCdEMsRUFBS3FDLGNBQWM1QyxVQUFVYSxPQUFPLGlDQUNwQ04sRUFBS3FDLGNBQWNDLFVBQVcsRUFFbEMsSUFBQ2hCLEVBQUEsMkJBRW9CLFdBQ25CLElBQU1pQixFQUFLdkMsRUFDWEEsRUFBS2tDLFVBQVlNLE1BQU1DLEtBQ3JCekMsRUFBS3FCLGNBQWNxQixpQkFBaUIxQyxFQUFLb0IsZ0JBQWdCdUIsUUFFM0QzQyxFQUFLcUMsY0FBZ0JyQyxFQUFLcUIsY0FBY3JDLGNBQ3RDZ0IsRUFBS29CLGdCQUFnQndCLFFBSXZCNUMsRUFBSzZDLHFCQUdMN0MsRUFBS2tDLFVBQVVZLFNBQVEsU0FBQ3ZCLEdBQ3RCQSxFQUFhdEIsaUJBQWlCLFNBQVMsV0FDckNzQyxFQUFHUSxvQkFBb0J4QixHQUN2QmdCLEVBQUdNLG9CQUNMLEdBQ0YsR0FDRixJQWpFRWhFLEtBQUt1QyxnQkFBa0JBLEVBQ3ZCdkMsS0FBS3dDLGNBQWdCQSxDQUN2QixDLFFBd0VDLE8sRUF4RUFGLEcsRUFBQSxFQUFBMUMsSUFBQSxtQkFBQUMsTUFpRUQsV0FDRUcsS0FBS3dDLGNBQWNwQixpQkFBaUIsVUFBVSxTQUFVK0MsR0FDdERBLEVBQUlDLGdCQUNOLElBR0FwRSxLQUFLcUUsb0JBQ1AsTSxvRUFBQy9CLENBQUEsQ0E1RStCLEdDQTNCLFNBQVN0QixFQUFjOEIsR0FDTDVDLFNBQVNDLGNBQWMyQyxHQUMvQmxDLFVBQVVDLE9BQU8sbUJBQ2xDLENBeUNBLFNBQVN5RCxJQUNQLE9BQU9wRSxTQUFTcUUsdUJBQXVCLG9CQUFvQkMsT0FBUyxFQUNoRXRFLFNBQVNxRSx1QkFBdUIsb0JBQW9CLEdBQUd6QixHQUN2RCxJQUNOLEMsbXFCQTFDQTVDLFNBQ0dDLGNBQWMsaUNBQ2RpQixpQkFBaUIsU0FBUyxXQUN6QkosRUFBYyx5QkFDaEIsSUFHRmQsU0FDR0MsY0FBYyxnQ0FDZGlCLGlCQUFpQixTQUFTLFdBQ3pCSixFQUFjLHFCQUNoQixJQUdlZCxTQUFTMkQsaUJBQWlCLFlBQ2xDSSxTQUFRLFNBQUNRLEdBQ2hCQSxFQUFLckQsaUJBQWlCLFNBQVMsU0FBQ04sR0FFNUJBLEVBQU1PLFNBQVdvRCxJQUNnRCxHQUFqRTNELEVBQU1PLE9BQU9KLFVBQVVDLFFBQVEsK0JBSUgsTUFBOUJvRCxLQUNJdEQsRUFBYyxJQUFNc0QsSUFFMUIsR0FDRixJQWlCQXBFLFNBQVNrQixpQkFBaUIsV0FkRixTQUFDTixHQUNMLFdBQWRBLEVBQU1sQixLQUNzQixNQUE5QjBFLEtBQ0l0RCxFQUFjLElBQU1zRCxJQUc1QixJLElDMUNxQkksRUFBRyxXQUN0QixTQUFBQSxFQUFZQyxJLDRGQUFTakYsQ0FBQSxLQUFBZ0YsR0FFbkIxRSxLQUFLNEUsU0FBV0QsRUFBUUUsUUFDeEI3RSxLQUFLOEUsU0FBV0gsRUFBUUksT0FDMUIsQyxRQTJEQSxPLEVBM0RDTCxHLEVBQUEsRUFBQTlFLElBQUEsa0JBQUFDLE1BRUQsV0FDRSxPQUFPbUYsTUFBTWhGLEtBQUs0RSxTQUFXLFNBQVUsQ0FDckNHLFFBQVMvRSxLQUFLOEUsV0FDYkcsTUFBSyxTQUFDQyxHQUNQLE9BQUlBLEVBQUlDLEdBQ0NELEVBQUlFLE9BR05DLFFBQVFDLE9BQU8sVUFBRHpDLE9BQVdxQyxFQUFJSyxRQUN0QyxHQUNGLEdBQUMsQ0FBQTNGLElBQUEsbUJBQUFDLE1BRUQsV0FDRSxPQUFPbUYsTUFBTWhGLEtBQUs0RSxTQUFXLFlBQWEsQ0FDeENHLFFBQVMvRSxLQUFLOEUsV0FDYkcsTUFBSyxTQUFDQyxHQUNQLE9BQUlBLEVBQUlDLEdBQ0NELEVBQUlFLE9BR05DLFFBQVFDLE9BQU8sVUFBRHpDLE9BQVdxQyxFQUFJSyxRQUN0QyxHQUNGLEdBQUMsQ0FBQTNGLElBQUEscUJBQUFDLE1BRUQsU0FBbUJFLEVBQU15RixHQUN2QixPQUFPUixNQUFNaEYsS0FBSzRFLFNBQVcsWUFBYSxDQUN4Q2EsT0FBUSxRQUNSVixRQUFTL0UsS0FBSzhFLFNBQ2RZLEtBQU1DLEtBQUtDLFVBQVUsQ0FDbkI3RixLQUFNQSxFQUNOeUYsTUFBT0EsTUFFUlAsTUFBSyxTQUFDQyxHQUNQLE9BQUlBLEVBQUlDLEdBQ0NELEVBQUlFLE9BR05DLFFBQVFDLE9BQU8sVUFBRHpDLE9BQVdxQyxFQUFJSyxRQUN0QyxHQUNGLEdBQUMsQ0FBQTNGLElBQUEsY0FBQUMsTUFFRCxTQUFZRSxFQUFNRCxHQUNoQixPQUFPa0YsTUFBTWhGLEtBQUs0RSxTQUFXLFNBQVUsQ0FDckNhLE9BQVEsT0FDUlYsUUFBUy9FLEtBQUs4RSxTQUNkWSxLQUFNQyxLQUFLQyxVQUFVLENBQ25CN0YsS0FBTUEsRUFDTkQsS0FBTUEsTUFFUG1GLE1BQUssU0FBQ0MsR0FDUCxPQUFJQSxFQUFJQyxHQUNDRCxFQUFJRSxPQUdOQyxRQUFRQyxPQUFPLFVBQUR6QyxPQUFXcUMsRUFBSUssUUFDdEMsR0FDRixNLG9FQUNBYixDQUFBLENBaEVzQixHLHVxQkNBSG1CLEVBQVEsV0FDM0IsU0FBQUEsRUFBQUMsR0FBMkUsSUFBN0RDLEVBQVdELEVBQVhDLFlBQWFDLEVBQVVGLEVBQVZFLFdBQVlDLEVBQWFILEVBQWJHLGNBQWVsRyxFQUFJK0YsRUFBSi9GLEtBQU1tRyxFQUFHSixFQUFISSxJQUFLQyxFQUFNTCxFQUFOSyxRLDRGQUFNekcsQ0FBQSxLQUFBbUcsR0FDckU3RixLQUFLK0YsWUFBY0EsRUFDbkIvRixLQUFLZ0csV0FBYUEsRUFDbEJoRyxLQUFLaUcsY0FBZ0JBLEVBQ3JCakcsS0FBS0QsS0FBT0EsRUFDWkMsS0FBS2tHLElBQU1BLEVBQ1hsRyxLQUFLbUcsT0FBU0EsQ0FDaEIsQyxRQWFDLE8sRUFiQU4sRyxFQUFBLEVBQUFqRyxJQUFBLGNBQUFDLE1BRUQsV0FDRSxNQUFPLENBQUVFLEtBQU1DLEtBQUtELEtBQU1tRyxJQUFLbEcsS0FBS2tHLElBQUtDLE9BQVFuRyxLQUFLbUcsT0FDeEQsR0FBQyxDQUFBdkcsSUFBQSxjQUFBQyxNQUVELFNBQUF1RyxHQUFtQyxJQUFyQnJHLEVBQUlxRyxFQUFKckcsS0FBTW1HLEVBQUdFLEVBQUhGLElBQUtDLEVBQU1DLEVBQU5ELE9BQ3ZCbkcsS0FBS0QsS0FBT0EsRUFDWkMsS0FBS2tHLElBQU1BLEVBQ1hsRyxLQUFLbUcsT0FBU0EsRUFDZG5HLEtBQUsrRixZQUFZeEYsWUFBY1AsS0FBS0QsS0FDcENDLEtBQUtnRyxXQUFXekYsWUFBY1AsS0FBS2tHLElBQ25DbEcsS0FBS2lHLGNBQWM3RixJQUFNSixLQUFLbUcsTUFDaEMsTSxvRUFBQ04sQ0FBQSxDQXJCMEIsR0NPdkJRLEVBQVluRyxTQUFTQyxjQUFjLHVCQUN2Q21HLEVBQVdwRyxTQUFTQyxjQUFjLHNCQUNsQzRGLEVBQWM3RixTQUFTQyxjQUFjLDJCQUNyQzZGLEVBQWE5RixTQUFTQyxjQUFjLGlDQUNwQ29HLEVBQWFyRyxTQUFTQyxjQUFjLHdCQUNwQ3FHLEVBQWdCdEcsU0FBU0MsY0FBYywyQkFDdkNzRyxFQUFPdkcsU0FBU0MsY0FBYywyQkFDOUI4RixFQUFnQi9GLFNBQVNDLGNBQWMsMkJBQ3ZDdUcsRUFBTSxJQUFJaEMsRUFBSSxDQUNaRyxRQUFTLHNEQUNURSxRQUFTLENBQ1A0QixjQUFlLHVDQUNmLGVBQWdCLHNCQUl0QkQsRUFBSUUsbUJBQW1CM0IsTUFBSyxTQUFDNEIsR0FDM0IsSUFBTTlHLEVBQU84RyxFQUFLOUcsS0FDWm1HLEVBQU1XLEVBQUtyQixNQUNYVyxFQUFTVSxFQUFLQyxPQUNkQyxFQUFZLElBQUlsQixFQUFTLENBQzdCRSxZQUFBQSxFQUNBQyxXQUFBQSxFQUNBQyxjQUFBQSxFQUNBbEcsS0FBQUEsRUFDQW1HLElBQUFBLEVBQ0FDLE9BQUFBLElBRUZZLEVBQVVDLFlBQVlELEVBQVVFLGNBQ2xDLElBR0EvRyxTQUNHQyxjQUFjLGdCQUNkaUIsaUJBQWlCLFVBT3BCLFNBQWlDK0MsR0FDL0JBLEVBQUlDLGlCQUNKc0MsRUFBSVEsbUJBQW1CYixFQUFVeEcsTUFBT3lHLEVBQVN6RyxPQUFPb0YsTUFBSyxTQUFDNEIsR0FDNUQsSUFBTTlHLEVBQU84RyxFQUFLOUcsS0FDWm1HLEVBQU1XLEVBQUtyQixNQUNYVyxFQUFTVSxFQUFLQyxPQUNkQyxFQUFZLElBQUlsQixFQUFTLENBQzdCRSxZQUFBQSxFQUNBQyxXQUFBQSxFQUNBQyxjQUFBQSxFQUNBbEcsS0FBQUEsRUFDQW1HLElBQUFBLEVBQ0FDLE9BQUFBLElBRUZZLEVBQVVDLFlBQVlELEVBQVVFLGVBQ2hDakcsRUFBYyx5QkFDaEIsR0FHRixJQXhCQWQsU0FDR0MsY0FBYyxjQUNkaUIsaUJBQWlCLFVBeUJwQixTQUErQitDLEdBQzdCQSxFQUFJQyxpQkFDSnNDLEVBQUlTLFlBQVlaLEVBQVcxRyxNQUFPMkcsRUFBYzNHLE9BQU9vRixNQUFLLFNBQUM0QixHQUMzRCxJQUFNTyxFQUFPLElBQUk5RixFQUFLdUYsRUFBSy9HLEtBQU0rRyxFQUFLOUcsTUFDdEMwRyxFQUFLWSxRQUFRRCxFQUFLRSxnQkFFbEJ0RyxFQUFjLHFCQUNoQixHQUNGLElBR0EsV0FFRSxJQUFNeUYsRUFBT3ZHLFNBQVNDLGNBQWMsMkJBQ3BDdUcsRUFBSWEsa0JBQWtCdEMsTUFBSyxTQUFDNEIsR0FFMUJBLEVBQUs1QyxTQUFRLFNBQUNRLEdBQ1osSUFBTTJDLEVBQU8sSUFBSTlGLEVBQUttRCxFQUFLM0UsS0FBTTJFLEVBQUsxRSxNQUV0QzBHLEVBQUtlLE9BQU9KLEVBQUtFLGVBQ25CLEdBQ0YsSUFNaUIzRCxNQUFNQyxLQUFLMUQsU0FBUzJELGlCQUFpQixtQkFDN0NJLFNBQVEsU0FBQ3dELEdBQ08sSUFBSW5GLEVBQ3pCLENBQ0V3QixNQUFPLHVCQUNQQyxPQUFRLGdDQUVWMEQsR0FFYUMsa0JBQ2pCLEdBZEYsQ0FpQkFDLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC5pby8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLmlvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AuaW8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLmlvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC5pby8uL3NyYy9jb21wb25lbnRzL3V0aWxzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLmlvLy4vc3JjL2NvbXBvbmVudHMvYXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLmlvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AuaW8vLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Iob3ZlcmxheUVsZW1lbnQpIHtcbiAgICBzdXBlcihvdmVybGF5RWxlbWVudCk7XG4gIH1cblxuICBoYW5kbGVPdmVybGF5KGxpbmssIG5hbWUpIHtcbiAgICB0aGlzLmltYWdlUHJldmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheV9fcHJldmlldy1pbWFnZVwiKTtcbiAgICB0aGlzLmltYWdlUHJldmlldy5zcmMgPSBsaW5rO1xuICAgIHRoaXMuaW1hZ2VQcmV2aWV3LmFsdCA9IG5hbWU7XG4gICAgdGhpcy5pbWFnZUNhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlfX3ByZXZpZXctY2FwdGlvblwiKTtcbiAgICB0aGlzLmltYWdlQ2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgc3VwZXIuaGFuZGxlT3ZlcmxheSgpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKG92ZXJsYXlFbGVtZW50KSB7XG4gICAgdGhpcy5vdmVybGF5RWxlbWVudCA9IG92ZXJsYXlFbGVtZW50O1xuICB9XG5cbiAgaGFuZGxlT3ZlcmxheSgpIHtcbiAgICB0aGlzLm92ZXJsYXlFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoXCJvdmVybGF5X192aXNpYmxlXCIpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5faWRlbnRpZmljYU92ZXJsYXlBYmllcnRvKCkgPyB0aGlzLmhhbmRsZU92ZXJsYXkoKSA6IG51bGw7XG4gICAgfVxuICB9XG5cbiAgX2lkZW50aWZpY2FPdmVybGF5QWJpZXJ0bygpIHtcbiAgICByZXR1cm4gdGhpcy5vdmVybGF5RWxlbWVudC5jbGFzc05hbWUuaW5kZXhPZihcIm92ZXJsYXlfX3Zpc2libGVcIikgPiAtMTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMub3ZlcmxheUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBldmVudC50YXJnZXQgIT09IHRoaXMub3ZlcmxheUVsZW1lbnQgJiZcbiAgICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKFwib3ZlcmxheV9fZm9ybS1jbG9zZS1idXR0b25cIikgPT0gLTFcbiAgICAgICkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLl9pZGVudGlmaWNhT3ZlcmxheUFiaWVydG8oKSA/IHRoaXMuaGFuZGxlT3ZlcmxheSgpIDogbnVsbDtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IobGluaywgbmFtZSkge1xuICAgIHRoaXMubGluayA9IGxpbms7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlKCkge1xuICAgIHRoaXMuYnRuTGlrZS5jbGFzc0xpc3QudG9nZ2xlKFwiY29udGVudF9fZWxlbWVudHNfX2J1dHRvbi1saWtlLWFjdGl2ZVwiKTtcbiAgfVxuXG4gIF9kZWxldGVDYXJkKCkge1xuICAgIHRoaXMuZWxlbWVudC5yZW1vdmUoKTtcbiAgfVxuXG4gIF9zZXRFdmVudHMoKSB7XG4gICAgdGhpcy5idG5MaWtlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmJ0bkRlbGV0ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5fZGVsZXRlQ2FyZCgpO1xuICAgIH0pO1xuICAgIHRoaXMuY2FyZEltYWdlLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICBjb25zdCBvdmVybGF5Q2FyZFByZXZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI292ZXJsYXlDYXJkUHJldmlld1wiKTtcbiAgICAgIGNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uob3ZlcmxheUNhcmRQcmV2aWV3KTtcbiAgICAgIHBvcHVwSW1hZ2UuaGFuZGxlT3ZlcmxheSh0aGlzLmxpbmssIHRoaXMubmFtZSk7XG4gICAgfTtcbiAgfVxuXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RlbXBsYXRlXCIpO1xuICAgIHRoaXMuY2FyZEl0ZW0gPSBjYXJkVGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdGhpcy5lbGVtZW50ID0gdGhpcy5jYXJkSXRlbS5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzXCIpO1xuICAgIHRoaXMuY2FyZEltYWdlID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudF9fZWxlbWVudHMtaW1hZ2VcIik7XG4gICAgdGhpcy5jYXJkVGl0bGUgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19lbGVtZW50cy10aXRsZVwiKTtcbiAgICB0aGlzLmJ0bkxpa2UgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNvbnRlbnRfX2VsZW1lbnRzX19idXR0b24tbGlrZVwiXG4gICAgKTtcbiAgICB0aGlzLmJ0bkRlbGV0ZSA9IHRoaXMuY2FyZEl0ZW0ucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNvbnRlbnRfX2VsZW1lbnRzX19kZWxldGUtYnV0dG9uXCJcbiAgICApO1xuICAgIHRoaXMuY2FyZEltYWdlLnNyYyA9IHRoaXMubGluaztcbiAgICB0aGlzLmNhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMubmFtZTtcbiAgICB0aGlzLl9zZXRFdmVudHMoKTtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Iob1ZhbGlkYXRlSW5wdXRzLCBlVmFsaWRhdGVGb3JtKSB7XG4gICAgdGhpcy5vVmFsaWRhdGVJbnB1dHMgPSBvVmFsaWRhdGVJbnB1dHM7XG4gICAgdGhpcy5lVmFsaWRhdGVGb3JtID0gZVZhbGlkYXRlRm9ybTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkgPT4ge1xuICAgIHRoaXMuZXJyb3JFbGVtZW50ID0gdGhpcy5lVmFsaWRhdGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiKTtcbiAgICB0aGlzLmVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICB0aGlzLmVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIpO1xuICB9O1xuXG4gIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICB0aGlzLmVycm9yRWxlbWVudCA9IHRoaXMuZVZhbGlkYXRlRm9ybS5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIik7XG4gICAgdGhpcy5lcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0LWVycm9yX2FjdGl2ZVwiKTtcbiAgICB0aGlzLmVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH07XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eSA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfTtcblxuICBfaGFzSW52YWxpZElucHV0ID0gKCkgPT4ge1xuICAgIHJldHVybiB0aGlzLmlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9O1xuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwib3ZlcmxheV9fZm9ybS1idXR0b24tZGlzYWJsZWRcIik7XG4gICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm92ZXJsYXlfX2Zvcm0tYnV0dG9uLWRpc2FibGVkXCIpO1xuICAgICAgdGhpcy5idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICBjb25zdCBmdiA9IHRoaXM7XG4gICAgdGhpcy5pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5lVmFsaWRhdGVGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5vVmFsaWRhdGVJbnB1dHMuaW5wdXQpXG4gICAgKTtcbiAgICB0aGlzLmJ1dHRvbkVsZW1lbnQgPSB0aGlzLmVWYWxpZGF0ZUZvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMub1ZhbGlkYXRlSW5wdXRzLmJ1dHRvblxuICAgICk7XG5cbiAgICAvL2Rlc2FjdGl2YSBlbCBib3RvbiBkZSBzdWJtaXRcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuXG4gICAgLy9hZ3JlZ2EgbG9zIGV2ZW50b3MgZGUgZXNjdWNoYSBhIGNhZGEgaW5wdXRcbiAgICB0aGlzLmlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBmdi5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIGZ2Ll90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLmVWYWxpZGF0ZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIC8vZXN0YWJsZWNlIGxvcyBldmVudG9zIGRlIGVzY3VjaGEgcGFyYSBjYWRhIGZvcm11bGFyaW9cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gaGFuZGxlT3ZlcmxheShpZCkge1xuICBjb25zdCBvdmVybGF5RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaWQpO1xuICBvdmVybGF5RWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwib3ZlcmxheV9fdmlzaWJsZVwiKTtcbn1cblxuLy8gYWJyaXIgZm9ybXVsYXJpbyBkZWwgcGVyZmlsXG5kb2N1bWVudFxuICAucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19wcm9maWxlLWJ1dHRvbi1lZGl0XCIpXG4gIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgIGhhbmRsZU92ZXJsYXkoXCIjb3ZlcmxheV9fcHJvZmlsZS1lZGl0XCIpO1xuICB9KTtcblxuLy8gYWJyaXIgcG9wLXVwIGRlIG51ZXZvIGx1Z2FyXG5kb2N1bWVudFxuICAucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19wcm9maWxlLWJ1dHRvbi1hZGRcIilcbiAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgaGFuZGxlT3ZlcmxheShcIiNvdmVybGF5X19jYXJkLWFkZFwiKTtcbiAgfSk7XG5cbi8vIGNpZXJyZSBjb24gdGVjbGEgWFxuY29uc3Qgb3ZlcmxheXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm92ZXJsYXlcIik7XG5vdmVybGF5cy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgIGlmIChcbiAgICAgIGV2ZW50LnRhcmdldCAhPT0gaXRlbSAmJlxuICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKFwib3ZlcmxheV9fZm9ybS1jbG9zZS1idXR0b25cIikgPT0gLTFcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWRlbnRpZmljYU92ZXJsYXlBYmllcnRvKCkgIT0gbnVsbFxuICAgICAgPyBoYW5kbGVPdmVybGF5KFwiI1wiICsgaWRlbnRpZmljYU92ZXJsYXlBYmllcnRvKCkpXG4gICAgICA6IG51bGw7XG4gIH0pO1xufSk7XG5cbi8vIGNpZXJyZSBjb24gdGVjbGEgZXNjYXBlXG5jb25zdCBrZXlkb3duTGlzdGVuZXIgPSAoZXZlbnQpID0+IHtcbiAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgIGlkZW50aWZpY2FPdmVybGF5QWJpZXJ0bygpICE9IG51bGxcbiAgICAgID8gaGFuZGxlT3ZlcmxheShcIiNcIiArIGlkZW50aWZpY2FPdmVybGF5QWJpZXJ0bygpKVxuICAgICAgOiBudWxsO1xuICB9XG59O1xuXG5mdW5jdGlvbiBpZGVudGlmaWNhT3ZlcmxheUFiaWVydG8oKSB7XG4gIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwib3ZlcmxheV9fdmlzaWJsZVwiKS5sZW5ndGggPiAwXG4gICAgPyBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwib3ZlcmxheV9fdmlzaWJsZVwiKVswXS5pZFxuICAgIDogbnVsbDtcbn1cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwga2V5ZG93bkxpc3RlbmVyKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAvLyBjdWVycG8gZGVsIGNvbnN0cnVjdG9yXG4gICAgdGhpcy5fYmFzZVVSTCA9IG9wdGlvbnMuYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVVJMICsgXCIvY2FyZHNcIiwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICAvLyBzaSBlbCBzZXJ2aWRvciBkZXZ1ZWx2ZSB1biBlcnJvciwgcmVjaGF6YSBlbCBwcm9taXNlXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRJbml0aWFsVXNlck1lKCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVVJMICsgXCIvdXNlcnMvbWVcIiwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICAvLyBzaSBlbCBzZXJ2aWRvciBkZXZ1ZWx2ZSB1biBlcnJvciwgcmVjaGF6YSBlbCBwcm9taXNlXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBwYXRjaEluaXRpYWxVc2VyTWUobmFtZSwgYWJvdXQpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVSTCArIFwiL3VzZXJzL21lXCIsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgYWJvdXQ6IGFib3V0LFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgLy8gc2kgZWwgc2Vydmlkb3IgZGV2dWVsdmUgdW4gZXJyb3IsIHJlY2hhemEgZWwgcHJvbWlzZVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgcG9zdE5ld0NhcmQobmFtZSwgbGluaykge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVVJMICsgXCIvY2FyZHNcIiwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIGxpbms6IGxpbmssXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICAvLyBzaSBlbCBzZXJ2aWRvciBkZXZ1ZWx2ZSB1biBlcnJvciwgcmVjaGF6YSBlbCBwcm9taXNlXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cbiAgLy8gb3Ryb3MgbcOpdG9kb3MgcGFyYSB0cmFiYWphciBjb24gbGEgQVBJXG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZUVsZW1lbnQsIGpvYkVsZW1lbnQsIGltYWdlbkVsZW1lbnQsIG5hbWUsIGpvYiwgaW1hZ2VuIH0pIHtcbiAgICB0aGlzLm5hbWVFbGVtZW50ID0gbmFtZUVsZW1lbnQ7XG4gICAgdGhpcy5qb2JFbGVtZW50ID0gam9iRWxlbWVudDtcbiAgICB0aGlzLmltYWdlbkVsZW1lbnQgPSBpbWFnZW5FbGVtZW50O1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5qb2IgPSBqb2I7XG4gICAgdGhpcy5pbWFnZW4gPSBpbWFnZW47XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4geyBuYW1lOiB0aGlzLm5hbWUsIGpvYjogdGhpcy5qb2IsIGltYWdlbjogdGhpcy5pbWFnZW4gfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgam9iLCBpbWFnZW4gfSkge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5qb2IgPSBqb2I7XG4gICAgdGhpcy5pbWFnZW4gPSBpbWFnZW47XG4gICAgdGhpcy5uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMubmFtZTtcbiAgICB0aGlzLmpvYkVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLmpvYjtcbiAgICB0aGlzLmltYWdlbkVsZW1lbnQuc3JjID0gdGhpcy5pbWFnZW47XG4gIH1cbn1cbiIsImltcG9ydCBcIi4vcGFnZS9pbmRleC5jc3NcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgeyBoYW5kbGVPdmVybGF5IH0gZnJvbSBcIi4vY29tcG9uZW50cy91dGlsc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi9jb21wb25lbnRzL2FwaVwiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuL2NvbXBvbmVudHMvVXNlckluZm9cIjtcbi8vdmFyaWFibGUgcXVlIGFsbWFjZW5hIGVsIGFycmF5IGRlIG9iamV0b3MgY29uIGxhcyA2IGNhcmRzIGluaWNpYWxlc1xuY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5X19mb3JtLW5hbWVcIiksXG4gIGpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5X19mb3JtLWpvYlwiKSxcbiAgbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX3Byb2ZpbGUtdGl0bGVcIiksXG4gIGpvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX3Byb2ZpbGUtZGVzY3JpcHRpb25cIiksXG4gIHBsYWNlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI292ZXJsYXlfX2Zvcm0tcGxhY2VcIiksXG4gIGltYWdlVXJsSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI292ZXJsYXlfX2Zvcm0taW1hZ2VVUkxcIiksXG4gIGdyaWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX2VsZW1lbnRzLWdyaWRcIiksXG4gIGltYWdlbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX3Byb2ZpbGUtaW1hZ2VcIiksXG4gIGFwaSA9IG5ldyBBcGkoe1xuICAgIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWJfZXNfY29ob3J0XzAzXCIsXG4gICAgaGVhZGVyczoge1xuICAgICAgYXV0aG9yaXphdGlvbjogXCIzNjFjMjQ5Ny03M2I0LTRkZDEtOWEwMi0yMjI1ZmY1OTYzYjVcIixcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgIH0sXG4gIH0pO1xuXG5hcGkuZ2V0SW5pdGlhbFVzZXJNZSgpLnRoZW4oKGRhdGEpID0+IHtcbiAgY29uc3QgbmFtZSA9IGRhdGEubmFtZTtcbiAgY29uc3Qgam9iID0gZGF0YS5hYm91dDtcbiAgY29uc3QgaW1hZ2VuID0gZGF0YS5hdmF0YXI7XG4gIGNvbnN0IGNVc2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gICAgbmFtZUVsZW1lbnQsXG4gICAgam9iRWxlbWVudCxcbiAgICBpbWFnZW5FbGVtZW50LFxuICAgIG5hbWUsXG4gICAgam9iLFxuICAgIGltYWdlbixcbiAgfSk7XG4gIGNVc2VySW5mby5zZXRVc2VySW5mbyhjVXNlckluZm8uZ2V0VXNlckluZm8oKSk7XG59KTtcblxuLy8gcG9wLXVwIGNhcmQgcHJldmlld1xuZG9jdW1lbnRcbiAgLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZUZvcm1cIilcbiAgLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xuXG5kb2N1bWVudFxuICAucXVlcnlTZWxlY3RvcihcIiNpbWFnZUZvcm1cIilcbiAgLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlSW1hZ2VGb3JtU3VibWl0KTtcblxuLy8gcG9wLXVwIGVkaXQgcHJvZmlsZVxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBhcGkucGF0Y2hJbml0aWFsVXNlck1lKG5hbWVJbnB1dC52YWx1ZSwgam9iSW5wdXQudmFsdWUpLnRoZW4oKGRhdGEpID0+IHtcbiAgICBjb25zdCBuYW1lID0gZGF0YS5uYW1lO1xuICAgIGNvbnN0IGpvYiA9IGRhdGEuYWJvdXQ7XG4gICAgY29uc3QgaW1hZ2VuID0gZGF0YS5hdmF0YXI7XG4gICAgY29uc3QgY1VzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgICAgIG5hbWVFbGVtZW50LFxuICAgICAgam9iRWxlbWVudCxcbiAgICAgIGltYWdlbkVsZW1lbnQsXG4gICAgICBuYW1lLFxuICAgICAgam9iLFxuICAgICAgaW1hZ2VuLFxuICAgIH0pO1xuICAgIGNVc2VySW5mby5zZXRVc2VySW5mbyhjVXNlckluZm8uZ2V0VXNlckluZm8oKSk7XG4gICAgaGFuZGxlT3ZlcmxheShcIiNvdmVybGF5X19wcm9maWxlLWVkaXRcIik7XG4gIH0pO1xuICAvLyBuYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWVJbnB1dC52YWx1ZTtcbiAgLy8gam9iRWxlbWVudC50ZXh0Q29udGVudCA9IGpvYklucHV0LnZhbHVlO1xufVxuXG4vLyBwb3AtdXAgYWRkIG5ldyBwbGFjZVxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgYXBpLnBvc3ROZXdDYXJkKHBsYWNlSW5wdXQudmFsdWUsIGltYWdlVXJsSW5wdXQudmFsdWUpLnRoZW4oKGRhdGEpID0+IHtcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoZGF0YS5saW5rLCBkYXRhLm5hbWUpO1xuICAgIGdyaWQucHJlcGVuZChjYXJkLmdlbmVyYXRlQ2FyZCgpKTtcblxuICAgIGhhbmRsZU92ZXJsYXkoXCIjb3ZlcmxheV9fY2FyZC1hZGRcIik7XG4gIH0pO1xufVxuXG4vLyBjb2RpZ28gZGUgbGEgZ2FsZXJpYVxuZnVuY3Rpb24gcmVuZGVyR2FsbGVyeSgpIHtcbiAgLy9vYnRlbmVyIGdyaWQgZGUgbGEgZ2FsZXJpYVxuICBjb25zdCBncmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19lbGVtZW50cy1ncmlkXCIpO1xuICBhcGkuZ2V0SW5pdGlhbENhcmRzKCkudGhlbigoZGF0YSkgPT4ge1xuICAgIC8vY3JlYSBlbCBncmlkIGRlIGxhIGdhbGVyaWFcbiAgICBkYXRhLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLmxpbmssIGl0ZW0ubmFtZSk7XG4gICAgICAvL2FncmVnYWxvIGFsIGdyaWQgZGVzZGUgZWwgb2JqZXRvIGNhcmQsIGxsYW1hbmRvIGFsIG1ldG9kbyBnZW5lcmF0ZUNhcmRcbiAgICAgIGdyaWQuYXBwZW5kKGNhcmQuZ2VuZXJhdGVDYXJkKCkpO1xuICAgIH0pO1xuICB9KTtcbiAgZW5hYmxlVmFsaWRhdGlvbigpO1xufVxuXG4vLyBhw7FhZGUgYSB0b2RvcyBsb3MgZm9ybXVsYXJpb3MgbGEgdmFsaWRhY2nDs24gZGUgbGEgY2xhc2UgRm9ybVZhbGlkYXRvclxuZnVuY3Rpb24gZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIub3ZlcmxheV9fZm9ybVwiKSk7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgY29uc3Qgb0Zvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgICAgIHtcbiAgICAgICAgaW5wdXQ6IFwiLm92ZXJsYXlfX3RleHQtaW5wdXRcIixcbiAgICAgICAgYnV0dG9uOiBcIi5vdmVybGF5X19mb3JtLXN1Ym1pdC1idXR0b25cIixcbiAgICAgIH0sXG4gICAgICBmb3JtRWxlbWVudFxuICAgICk7XG4gICAgb0Zvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn1cblxucmVuZGVyR2FsbGVyeSgpO1xuIl0sIm5hbWVzIjpbIlBvcHVwV2l0aEltYWdlIiwiX1BvcHVwIiwiX2luaGVyaXRzIiwiX3N1cGVyIiwib3ZlcmxheUVsZW1lbnQiLCJfY2xhc3NDYWxsQ2hlY2siLCJjYWxsIiwia2V5IiwidmFsdWUiLCJsaW5rIiwibmFtZSIsInRoaXMiLCJpbWFnZVByZXZpZXciLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzcmMiLCJhbHQiLCJpbWFnZUNhcHRpb24iLCJ0ZXh0Q29udGVudCIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJQb3B1cCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImV2ZW50IiwiX2lkZW50aWZpY2FPdmVybGF5QWJpZXJ0byIsImhhbmRsZU92ZXJsYXkiLCJjbGFzc05hbWUiLCJpbmRleE9mIiwiX3RoaXMiLCJhZGRFdmVudExpc3RlbmVyIiwidGFyZ2V0IiwiQ2FyZCIsImJ0bkxpa2UiLCJlbGVtZW50IiwicmVtb3ZlIiwiX2hhbmRsZUxpa2UiLCJidG5EZWxldGUiLCJfZGVsZXRlQ2FyZCIsImNhcmRJbWFnZSIsIm9uY2xpY2siLCJvdmVybGF5Q2FyZFByZXZpZXciLCJjYXJkVGVtcGxhdGUiLCJjYXJkSXRlbSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkVGl0bGUiLCJfc2V0RXZlbnRzIiwiRm9ybVZhbGlkYXRvciIsIm9WYWxpZGF0ZUlucHV0cyIsImVWYWxpZGF0ZUZvcm0iLCJfZGVmaW5lUHJvcGVydHkiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJjb25jYXQiLCJpZCIsImFkZCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImlucHV0TGlzdCIsInNvbWUiLCJfaGFzSW52YWxpZElucHV0IiwiYnV0dG9uRWxlbWVudCIsImRpc2FibGVkIiwiZnYiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXQiLCJidXR0b24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiaWRlbnRpZmljYU92ZXJsYXlBYmllcnRvIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImxlbmd0aCIsIml0ZW0iLCJBcGkiLCJvcHRpb25zIiwiX2Jhc2VVUkwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImFib3V0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJVc2VySW5mbyIsIl9yZWYiLCJuYW1lRWxlbWVudCIsImpvYkVsZW1lbnQiLCJpbWFnZW5FbGVtZW50Iiwiam9iIiwiaW1hZ2VuIiwiX3JlZjIiLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsInBsYWNlSW5wdXQiLCJpbWFnZVVybElucHV0IiwiZ3JpZCIsImFwaSIsImF1dGhvcml6YXRpb24iLCJnZXRJbml0aWFsVXNlck1lIiwiZGF0YSIsImF2YXRhciIsImNVc2VySW5mbyIsInNldFVzZXJJbmZvIiwiZ2V0VXNlckluZm8iLCJwYXRjaEluaXRpYWxVc2VyTWUiLCJwb3N0TmV3Q2FyZCIsImNhcmQiLCJwcmVwZW5kIiwiZ2VuZXJhdGVDYXJkIiwiZ2V0SW5pdGlhbENhcmRzIiwiYXBwZW5kIiwiZm9ybUVsZW1lbnQiLCJlbmFibGVWYWxpZGF0aW9uIiwicmVuZGVyR2FsbGVyeSJdLCJzb3VyY2VSb290IjoiIn0=