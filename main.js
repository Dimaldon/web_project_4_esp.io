!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.overlayElement=t}var n,r;return n=e,(r=[{key:"handleOverlay",value:function(){this.overlayElement.classList.toggle("overlay__visible")}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this._identificaOverlayAbierto()&&this.handleOverlay()}},{key:"_identificaOverlayAbierto",value:function(){return this.overlayElement.className.indexOf("overlay__visible")>-1}},{key:"setEventListeners",value:function(){var e=this;this.overlayElement.addEventListener("click",(function(t){t.target!==e.overlayElement&&-1==t.target.className.indexOf("overlay__form-close-button")||e._identificaOverlayAbierto()&&e.handleOverlay()}))}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}function i(){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},i.apply(this,arguments)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(f,e);var t,n,u,c,s=(u=f,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(u);if(c){var n=l(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function f(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),s.call(this,e)}return t=f,(n=[{key:"handleOverlay",value:function(e,t){this.imagePreview=document.querySelector(".overlay__preview-image"),this.imagePreview.src=e,this.imagePreview.alt=t,this.imageCaption=document.querySelector(".overlay__preview-caption"),this.imageCaption.textContent=t,i(l(f.prototype),"handleOverlay",this).call(this)}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(n);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===c(o)?o:String(o)),r)}var o}var f=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.link=t,this.name=n,this.likes=r}var t,r;return t=e,(r=[{key:"_handleLike",value:function(){this.btnLike.classList.toggle("content__elements__button-like-active")}},{key:"_deleteCard",value:function(){this.element.remove()}},{key:"_setEvents",value:function(){var e=this;this.btnLike.addEventListener("click",(function(){e._handleLike()})),this.btnDelete.addEventListener("click",(function(){var e=document.querySelector("#overlayCardDelete");new n(e).handleOverlay()})),this.cardImage.onclick=function(){var t=document.querySelector("#overlayCardPreview");new u(t).handleOverlay(e.link,e.name)}}},{key:"generateCard",value:function(){var e=document.querySelector(".card__template");return this.cardItem=e.content.cloneNode(!0),this.element=this.cardItem.querySelector(".elements"),this.cardImage=this.element.querySelector(".content__elements-image"),this.cardTitle=this.element.querySelector(".content__elements-title"),this.cardLikes=this.element.querySelector(".content__elements__numbers-like"),this.btnLike=this.element.querySelector(".content__elements__button-like"),this.btnDelete=this.cardItem.querySelector(".content__elements__delete-button"),this.cardImage.src=this.link,this.cardTitle.textContent=this.name,this.cardLikes.textContent=this.likes.length,this._setEvents(),this.element}}])&&s(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function v(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===m(t)?t:String(t)}var d=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"_showInputError",(function(e,t){r.errorElement=r.eValidateForm.querySelector(".".concat(e.id,"-error")),e.classList.add("form__input_type_error"),r.errorElement.textContent=t,r.errorElement.classList.add("form__input-error_active")})),v(this,"_hideInputError",(function(e){r.errorElement=r.eValidateForm.querySelector(".".concat(e.id,"-error")),e.classList.remove("form__input_type_error"),r.errorElement.classList.remove("form__input-error_active"),r.errorElement.textContent=""})),v(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),v(this,"_hasInvalidInput",(function(){return r.inputList.some((function(e){return!e.validity.valid}))})),v(this,"_toggleButtonState",(function(){r._hasInvalidInput()?(r.buttonElement.classList.add("overlay__form-button-disabled"),r.buttonElement.disabled=!0):(r.buttonElement.classList.remove("overlay__form-button-disabled"),r.buttonElement.disabled=!1)})),v(this,"_setEventListeners",(function(){var e=r;r.inputList=Array.from(r.eValidateForm.querySelectorAll(r.oValidateInputs.input)),r.buttonElement=r.eValidateForm.querySelector(r.oValidateInputs.button),r._toggleButtonState(),r.inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))})),this.oValidateInputs=t,this.eValidateForm=n}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this.eValidateForm.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function p(e){document.querySelector(e).classList.toggle("overlay__visible")}function h(){return document.getElementsByClassName("overlay__visible").length>0?document.getElementsByClassName("overlay__visible")[0].id:null}function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===_(o)?o:String(o)),r)}var o}document.querySelector(".content__profile-button-edit").addEventListener("click",(function(){p("#overlay__profile-edit")})),document.querySelector(".content__profile-button-add").addEventListener("click",(function(){p("#overlay__card-add")})),document.querySelectorAll(".overlay").forEach((function(e){e.addEventListener("click",(function(t){t.target!==e&&-1==t.target.className.indexOf("overlay__form-close-button")||null!=h()&&p("#"+h())}))})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&null!=h()&&p("#"+h())}));var S=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseURL=t.baseUrl,this._headers=t.headers}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return fetch(this._baseURL+"/cards",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"getInitialUserMe",value:function(){return fetch(this._baseURL+"/users/me",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"patchInitialUserMe",value:function(e,t){return fetch(this._baseURL+"/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"postNewCard",value:function(e,t){return fetch(this._baseURL+"/cards",{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}])&&g(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==E(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===E(o)?o:String(o)),r)}var o}var j=function(){function e(t){var n=t.nameElement,r=t.jobElement,o=t.imagenElement,i=t.name,a=t.job,l=t.imagen;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nameElement=n,this.jobElement=r,this.imagenElement=o,this.name=i,this.job=a,this.imagen=l}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this.name,job:this.job,imagen:this.imagen}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.job,r=e.imagen;this.name=t,this.job=n,this.imagen=r,this.nameElement.textContent=this.name,this.jobElement.textContent=this.job,this.imagenElement.src=this.imagen}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),k=document.querySelector("#overlay__form-name"),O=document.querySelector("#overlay__form-job"),P=document.querySelector(".content__profile-title"),L=document.querySelector(".content__profile-description"),q=document.querySelector("#overlay__form-place"),I=document.querySelector("#overlay__form-imageURL"),C=document.querySelector(".content__elements-grid"),T=document.querySelector(".content__profile-image"),U=new S({baseUrl:"https://around.nomoreparties.co/v1/web_es_cohort_03",headers:{authorization:"361c2497-73b4-4dd1-9a02-2225ff5963b5","Content-Type":"application/json"}});U.getInitialUserMe().then((function(e){var t=e.name,n=e.about,r=e.avatar,o=new j({nameElement:P,jobElement:L,imagenElement:T,name:t,job:n,imagen:r});o.setUserInfo(o.getUserInfo())})),document.querySelector("#profileForm").addEventListener("submit",(function(e){e.preventDefault(),U.patchInitialUserMe(k.value,O.value).then((function(e){var t=e.name,n=e.about,r=e.avatar,o=new j({nameElement:P,jobElement:L,imagenElement:T,name:t,job:n,imagen:r});o.setUserInfo(o.getUserInfo()),p("#overlay__profile-edit")}))})),document.querySelector("#imageForm").addEventListener("submit",(function(e){e.preventDefault(),U.postNewCard(q.value,I.value).then((function(e){var t=new f(e.link,e.name);C.prepend(t.generateCard()),p("#overlay__card-add")}))})),function(){var e=document.querySelector(".content__elements-grid");U.getInitialCards().then((function(t){t.forEach((function(t){var n=new f(t.link,t.name,t.likes);e.append(n.generateCard())}))})),Array.from(document.querySelectorAll(".overlay__form")).forEach((function(e){new d({input:".overlay__text-input",button:".overlay__form-submit-button"},e).enableValidation()}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQVU3RyxNQUFPOEcsRUFBUzlHLE9BQU95RixNQUFLLFNBQUM0QixHQUM1RCxJQUFNcEcsRUFBT29HLEVBQUtwRyxLQUNaeUYsRUFBTVcsRUFBS3JCLE1BQ1hXLEVBQVNVLEVBQUtDLE9BQ2RDLEVBQVksSUFBSWxCLEVBQVMsQ0FDN0JFLFlBQUFBLEVBQ0FDLFdBQUFBLEVBQ0FDLGNBQUFBLEVBQ0F4RixLQUFBQSxFQUNBeUYsSUFBQUEsRUFDQUMsT0FBQUEsSUFFRlksRUFBVUMsWUFBWUQsRUFBVUUsZUFDaENwSCxFQUFjLHlCQUNoQixHQUdGLElBeEJBYyxTQUNHQyxjQUFjLGNBQ2RYLGlCQUFpQixVQXlCcEIsU0FBK0JtRSxHQUM3QkEsRUFBSUMsaUJBQ0pxQyxFQUFJUyxZQUFZWixFQUFXL0csTUFBT2dILEVBQWNoSCxPQUFPeUYsTUFBSyxTQUFDNEIsR0FDM0QsSUFBTU8sRUFBTyxJQUFJaEcsRUFBS3lGLEVBQUtyRyxLQUFNcUcsRUFBS3BHLE1BQ3RDZ0csRUFBS1ksUUFBUUQsRUFBS0UsZ0JBRWxCekgsRUFBYyxxQkFDaEIsR0FDRixJQUdBLFdBRUUsSUFBTTRHLEVBQU85RixTQUFTQyxjQUFjLDJCQUNwQzhGLEVBQUlhLGtCQUFrQnRDLE1BQUssU0FBQzRCLEdBRTFCQSxFQUFLM0MsU0FBUSxTQUFDTyxHQUNaLElBQU0yQyxFQUFPLElBQUloRyxFQUFLcUQsRUFBS2pFLEtBQU1pRSxFQUFLaEUsS0FBTWdFLEVBQUtwRCxPQUVqRG9GLEVBQUtlLE9BQU9KLEVBQUtFLGVBQ25CLEdBQ0YsSUFNaUIxRCxNQUFNQyxLQUFLbEQsU0FBU21ELGlCQUFpQixtQkFDN0NJLFNBQVEsU0FBQ3VELEdBQ08sSUFBSWxGLEVBQ3pCLENBQ0V3QixNQUFPLHVCQUNQQyxPQUFRLGdDQUVWeUQsR0FFYUMsa0JBQ2pCLEdBZEYsQ0FpQkFDLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC5pby8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLmlvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AuaW8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLmlvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC5pby8uL3NyYy9jb21wb25lbnRzL3V0aWxzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLmlvLy4vc3JjL2NvbXBvbmVudHMvYXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLmlvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AuaW8vLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihvdmVybGF5RWxlbWVudCkge1xuICAgIHRoaXMub3ZlcmxheUVsZW1lbnQgPSBvdmVybGF5RWxlbWVudDtcbiAgfVxuXG4gIGhhbmRsZU92ZXJsYXkoKSB7XG4gICAgdGhpcy5vdmVybGF5RWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwib3ZlcmxheV9fdmlzaWJsZVwiKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldmVudCkge1xuICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuX2lkZW50aWZpY2FPdmVybGF5QWJpZXJ0bygpID8gdGhpcy5oYW5kbGVPdmVybGF5KCkgOiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIF9pZGVudGlmaWNhT3ZlcmxheUFiaWVydG8oKSB7XG4gICAgcmV0dXJuIHRoaXMub3ZlcmxheUVsZW1lbnQuY2xhc3NOYW1lLmluZGV4T2YoXCJvdmVybGF5X192aXNpYmxlXCIpID4gLTE7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLm92ZXJsYXlFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZXZlbnQudGFyZ2V0ICE9PSB0aGlzLm92ZXJsYXlFbGVtZW50ICYmXG4gICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc05hbWUuaW5kZXhPZihcIm92ZXJsYXlfX2Zvcm0tY2xvc2UtYnV0dG9uXCIpID09IC0xXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5faWRlbnRpZmljYU92ZXJsYXlBYmllcnRvKCkgPyB0aGlzLmhhbmRsZU92ZXJsYXkoKSA6IG51bGw7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKG92ZXJsYXlFbGVtZW50KSB7XG4gICAgc3VwZXIob3ZlcmxheUVsZW1lbnQpO1xuICB9XG5cbiAgaGFuZGxlT3ZlcmxheShsaW5rLCBuYW1lKSB7XG4gICAgdGhpcy5pbWFnZVByZXZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlfX3ByZXZpZXctaW1hZ2VcIik7XG4gICAgdGhpcy5pbWFnZVByZXZpZXcuc3JjID0gbGluaztcbiAgICB0aGlzLmltYWdlUHJldmlldy5hbHQgPSBuYW1lO1xuICAgIHRoaXMuaW1hZ2VDYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5X19wcmV2aWV3LWNhcHRpb25cIik7XG4gICAgdGhpcy5pbWFnZUNhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLmhhbmRsZU92ZXJsYXkoKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihsaW5rLCBuYW1lLCBsaWtlcykge1xuICAgIHRoaXMubGluayA9IGxpbms7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmxpa2VzID0gbGlrZXM7XG4gIH1cblxuICBfaGFuZGxlTGlrZSgpIHtcbiAgICB0aGlzLmJ0bkxpa2UuY2xhc3NMaXN0LnRvZ2dsZShcImNvbnRlbnRfX2VsZW1lbnRzX19idXR0b24tbGlrZS1hY3RpdmVcIik7XG4gIH1cblxuICBfZGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLmVsZW1lbnQucmVtb3ZlKCk7XG4gIH1cblxuICBfc2V0RXZlbnRzKCkge1xuICAgIHRoaXMuYnRuTGlrZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5idG5EZWxldGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIC8vIHRoaXMuX2RlbGV0ZUNhcmQoKTtcbiAgICAgIGNvbnN0IG92ZXJsYXlDYXJkRGVsZXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5Q2FyZERlbGV0ZVwiKTtcbiAgICAgIGNvbnN0IHBvcHVwRGVsZXRlID0gbmV3IFBvcHVwKG92ZXJsYXlDYXJkRGVsZXRlKTtcbiAgICAgIHBvcHVwRGVsZXRlLmhhbmRsZU92ZXJsYXkoKTtcbiAgICB9KTtcbiAgICB0aGlzLmNhcmRJbWFnZS5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgY29uc3Qgb3ZlcmxheUNhcmRQcmV2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5Q2FyZFByZXZpZXdcIik7XG4gICAgICBjb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKG92ZXJsYXlDYXJkUHJldmlldyk7XG4gICAgICBwb3B1cEltYWdlLmhhbmRsZU92ZXJsYXkodGhpcy5saW5rLCB0aGlzLm5hbWUpO1xuICAgIH07XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190ZW1wbGF0ZVwiKTtcbiAgICB0aGlzLmNhcmRJdGVtID0gY2FyZFRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xuICAgIHRoaXMuZWxlbWVudCA9IHRoaXMuY2FyZEl0ZW0ucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c1wiKTtcbiAgICB0aGlzLmNhcmRJbWFnZSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX2VsZW1lbnRzLWltYWdlXCIpO1xuICAgIHRoaXMuY2FyZFRpdGxlID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudF9fZWxlbWVudHMtdGl0bGVcIik7XG4gICAgdGhpcy5jYXJkTGlrZXMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmNvbnRlbnRfX2VsZW1lbnRzX19udW1iZXJzLWxpa2VcIlxuICAgICk7XG4gICAgdGhpcy5idG5MaWtlID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5jb250ZW50X19lbGVtZW50c19fYnV0dG9uLWxpa2VcIlxuICAgICk7XG4gICAgdGhpcy5idG5EZWxldGUgPSB0aGlzLmNhcmRJdGVtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5jb250ZW50X19lbGVtZW50c19fZGVsZXRlLWJ1dHRvblwiXG4gICAgKTtcbiAgICB0aGlzLmNhcmRJbWFnZS5zcmMgPSB0aGlzLmxpbms7XG4gICAgdGhpcy5jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLm5hbWU7XG4gICAgdGhpcy5jYXJkTGlrZXMudGV4dENvbnRlbnQgPSB0aGlzLmxpa2VzLmxlbmd0aDtcbiAgICB0aGlzLl9zZXRFdmVudHMoKTtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Iob1ZhbGlkYXRlSW5wdXRzLCBlVmFsaWRhdGVGb3JtKSB7XG4gICAgdGhpcy5vVmFsaWRhdGVJbnB1dHMgPSBvVmFsaWRhdGVJbnB1dHM7XG4gICAgdGhpcy5lVmFsaWRhdGVGb3JtID0gZVZhbGlkYXRlRm9ybTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkgPT4ge1xuICAgIHRoaXMuZXJyb3JFbGVtZW50ID0gdGhpcy5lVmFsaWRhdGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiKTtcbiAgICB0aGlzLmVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICB0aGlzLmVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIpO1xuICB9O1xuXG4gIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICB0aGlzLmVycm9yRWxlbWVudCA9IHRoaXMuZVZhbGlkYXRlRm9ybS5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIik7XG4gICAgdGhpcy5lcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0LWVycm9yX2FjdGl2ZVwiKTtcbiAgICB0aGlzLmVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH07XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eSA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfTtcblxuICBfaGFzSW52YWxpZElucHV0ID0gKCkgPT4ge1xuICAgIHJldHVybiB0aGlzLmlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9O1xuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwib3ZlcmxheV9fZm9ybS1idXR0b24tZGlzYWJsZWRcIik7XG4gICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm92ZXJsYXlfX2Zvcm0tYnV0dG9uLWRpc2FibGVkXCIpO1xuICAgICAgdGhpcy5idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICBjb25zdCBmdiA9IHRoaXM7XG4gICAgdGhpcy5pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5lVmFsaWRhdGVGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5vVmFsaWRhdGVJbnB1dHMuaW5wdXQpXG4gICAgKTtcbiAgICB0aGlzLmJ1dHRvbkVsZW1lbnQgPSB0aGlzLmVWYWxpZGF0ZUZvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMub1ZhbGlkYXRlSW5wdXRzLmJ1dHRvblxuICAgICk7XG5cbiAgICAvL2Rlc2FjdGl2YSBlbCBib3RvbiBkZSBzdWJtaXRcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuXG4gICAgLy9hZ3JlZ2EgbG9zIGV2ZW50b3MgZGUgZXNjdWNoYSBhIGNhZGEgaW5wdXRcbiAgICB0aGlzLmlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBmdi5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIGZ2Ll90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLmVWYWxpZGF0ZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIC8vZXN0YWJsZWNlIGxvcyBldmVudG9zIGRlIGVzY3VjaGEgcGFyYSBjYWRhIGZvcm11bGFyaW9cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gaGFuZGxlT3ZlcmxheShpZCkge1xuICBjb25zdCBvdmVybGF5RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaWQpO1xuICBvdmVybGF5RWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwib3ZlcmxheV9fdmlzaWJsZVwiKTtcbn1cblxuLy8gYWJyaXIgZm9ybXVsYXJpbyBkZWwgcGVyZmlsXG5kb2N1bWVudFxuICAucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19wcm9maWxlLWJ1dHRvbi1lZGl0XCIpXG4gIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgIGhhbmRsZU92ZXJsYXkoXCIjb3ZlcmxheV9fcHJvZmlsZS1lZGl0XCIpO1xuICB9KTtcblxuLy8gYWJyaXIgcG9wLXVwIGRlIG51ZXZvIGx1Z2FyXG5kb2N1bWVudFxuICAucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19wcm9maWxlLWJ1dHRvbi1hZGRcIilcbiAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgaGFuZGxlT3ZlcmxheShcIiNvdmVybGF5X19jYXJkLWFkZFwiKTtcbiAgfSk7XG5cbi8vIGNpZXJyZSBjb24gdGVjbGEgWFxuY29uc3Qgb3ZlcmxheXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm92ZXJsYXlcIik7XG5vdmVybGF5cy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgIGlmIChcbiAgICAgIGV2ZW50LnRhcmdldCAhPT0gaXRlbSAmJlxuICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKFwib3ZlcmxheV9fZm9ybS1jbG9zZS1idXR0b25cIikgPT0gLTFcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWRlbnRpZmljYU92ZXJsYXlBYmllcnRvKCkgIT0gbnVsbFxuICAgICAgPyBoYW5kbGVPdmVybGF5KFwiI1wiICsgaWRlbnRpZmljYU92ZXJsYXlBYmllcnRvKCkpXG4gICAgICA6IG51bGw7XG4gIH0pO1xufSk7XG5cbi8vIGNpZXJyZSBjb24gdGVjbGEgZXNjYXBlXG5jb25zdCBrZXlkb3duTGlzdGVuZXIgPSAoZXZlbnQpID0+IHtcbiAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgIGlkZW50aWZpY2FPdmVybGF5QWJpZXJ0bygpICE9IG51bGxcbiAgICAgID8gaGFuZGxlT3ZlcmxheShcIiNcIiArIGlkZW50aWZpY2FPdmVybGF5QWJpZXJ0bygpKVxuICAgICAgOiBudWxsO1xuICB9XG59O1xuXG5mdW5jdGlvbiBpZGVudGlmaWNhT3ZlcmxheUFiaWVydG8oKSB7XG4gIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwib3ZlcmxheV9fdmlzaWJsZVwiKS5sZW5ndGggPiAwXG4gICAgPyBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwib3ZlcmxheV9fdmlzaWJsZVwiKVswXS5pZFxuICAgIDogbnVsbDtcbn1cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwga2V5ZG93bkxpc3RlbmVyKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAvLyBjdWVycG8gZGVsIGNvbnN0cnVjdG9yXG4gICAgdGhpcy5fYmFzZVVSTCA9IG9wdGlvbnMuYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVVJMICsgXCIvY2FyZHNcIiwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICAvLyBzaSBlbCBzZXJ2aWRvciBkZXZ1ZWx2ZSB1biBlcnJvciwgcmVjaGF6YSBlbCBwcm9taXNlXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRJbml0aWFsVXNlck1lKCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVVJMICsgXCIvdXNlcnMvbWVcIiwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICAvLyBzaSBlbCBzZXJ2aWRvciBkZXZ1ZWx2ZSB1biBlcnJvciwgcmVjaGF6YSBlbCBwcm9taXNlXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICBwYXRjaEluaXRpYWxVc2VyTWUobmFtZSwgYWJvdXQpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVSTCArIFwiL3VzZXJzL21lXCIsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgYWJvdXQ6IGFib3V0LFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgLy8gc2kgZWwgc2Vydmlkb3IgZGV2dWVsdmUgdW4gZXJyb3IsIHJlY2hhemEgZWwgcHJvbWlzZVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgcG9zdE5ld0NhcmQobmFtZSwgbGluaykge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVVJMICsgXCIvY2FyZHNcIiwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIGxpbms6IGxpbmssXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICAvLyBzaSBlbCBzZXJ2aWRvciBkZXZ1ZWx2ZSB1biBlcnJvciwgcmVjaGF6YSBlbCBwcm9taXNlXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cbiAgLy8gb3Ryb3MgbcOpdG9kb3MgcGFyYSB0cmFiYWphciBjb24gbGEgQVBJXG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZUVsZW1lbnQsIGpvYkVsZW1lbnQsIGltYWdlbkVsZW1lbnQsIG5hbWUsIGpvYiwgaW1hZ2VuIH0pIHtcbiAgICB0aGlzLm5hbWVFbGVtZW50ID0gbmFtZUVsZW1lbnQ7XG4gICAgdGhpcy5qb2JFbGVtZW50ID0gam9iRWxlbWVudDtcbiAgICB0aGlzLmltYWdlbkVsZW1lbnQgPSBpbWFnZW5FbGVtZW50O1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5qb2IgPSBqb2I7XG4gICAgdGhpcy5pbWFnZW4gPSBpbWFnZW47XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4geyBuYW1lOiB0aGlzLm5hbWUsIGpvYjogdGhpcy5qb2IsIGltYWdlbjogdGhpcy5pbWFnZW4gfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgam9iLCBpbWFnZW4gfSkge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5qb2IgPSBqb2I7XG4gICAgdGhpcy5pbWFnZW4gPSBpbWFnZW47XG4gICAgdGhpcy5uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMubmFtZTtcbiAgICB0aGlzLmpvYkVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLmpvYjtcbiAgICB0aGlzLmltYWdlbkVsZW1lbnQuc3JjID0gdGhpcy5pbWFnZW47XG4gIH1cbn1cbiIsImltcG9ydCBcIi4vcGFnZS9pbmRleC5jc3NcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgeyBoYW5kbGVPdmVybGF5IH0gZnJvbSBcIi4vY29tcG9uZW50cy91dGlsc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi9jb21wb25lbnRzL2FwaVwiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuL2NvbXBvbmVudHMvVXNlckluZm9cIjtcbi8vdmFyaWFibGUgcXVlIGFsbWFjZW5hIGVsIGFycmF5IGRlIG9iamV0b3MgY29uIGxhcyA2IGNhcmRzIGluaWNpYWxlc1xuY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5X19mb3JtLW5hbWVcIiksXG4gIGpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5X19mb3JtLWpvYlwiKSxcbiAgbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX3Byb2ZpbGUtdGl0bGVcIiksXG4gIGpvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX3Byb2ZpbGUtZGVzY3JpcHRpb25cIiksXG4gIHBsYWNlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI292ZXJsYXlfX2Zvcm0tcGxhY2VcIiksXG4gIGltYWdlVXJsSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI292ZXJsYXlfX2Zvcm0taW1hZ2VVUkxcIiksXG4gIGdyaWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX2VsZW1lbnRzLWdyaWRcIiksXG4gIGltYWdlbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX3Byb2ZpbGUtaW1hZ2VcIiksXG4gIGFwaSA9IG5ldyBBcGkoe1xuICAgIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWJfZXNfY29ob3J0XzAzXCIsXG4gICAgaGVhZGVyczoge1xuICAgICAgYXV0aG9yaXphdGlvbjogXCIzNjFjMjQ5Ny03M2I0LTRkZDEtOWEwMi0yMjI1ZmY1OTYzYjVcIixcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgIH0sXG4gIH0pO1xuXG5hcGkuZ2V0SW5pdGlhbFVzZXJNZSgpLnRoZW4oKGRhdGEpID0+IHtcbiAgY29uc3QgbmFtZSA9IGRhdGEubmFtZTtcbiAgY29uc3Qgam9iID0gZGF0YS5hYm91dDtcbiAgY29uc3QgaW1hZ2VuID0gZGF0YS5hdmF0YXI7XG4gIGNvbnN0IGNVc2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gICAgbmFtZUVsZW1lbnQsXG4gICAgam9iRWxlbWVudCxcbiAgICBpbWFnZW5FbGVtZW50LFxuICAgIG5hbWUsXG4gICAgam9iLFxuICAgIGltYWdlbixcbiAgfSk7XG4gIGNVc2VySW5mby5zZXRVc2VySW5mbyhjVXNlckluZm8uZ2V0VXNlckluZm8oKSk7XG59KTtcblxuLy8gcG9wLXVwIGNhcmQgcHJldmlld1xuZG9jdW1lbnRcbiAgLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZUZvcm1cIilcbiAgLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xuXG5kb2N1bWVudFxuICAucXVlcnlTZWxlY3RvcihcIiNpbWFnZUZvcm1cIilcbiAgLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlSW1hZ2VGb3JtU3VibWl0KTtcblxuLy8gcG9wLXVwIGVkaXQgcHJvZmlsZVxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBhcGkucGF0Y2hJbml0aWFsVXNlck1lKG5hbWVJbnB1dC52YWx1ZSwgam9iSW5wdXQudmFsdWUpLnRoZW4oKGRhdGEpID0+IHtcbiAgICBjb25zdCBuYW1lID0gZGF0YS5uYW1lO1xuICAgIGNvbnN0IGpvYiA9IGRhdGEuYWJvdXQ7XG4gICAgY29uc3QgaW1hZ2VuID0gZGF0YS5hdmF0YXI7XG4gICAgY29uc3QgY1VzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgICAgIG5hbWVFbGVtZW50LFxuICAgICAgam9iRWxlbWVudCxcbiAgICAgIGltYWdlbkVsZW1lbnQsXG4gICAgICBuYW1lLFxuICAgICAgam9iLFxuICAgICAgaW1hZ2VuLFxuICAgIH0pO1xuICAgIGNVc2VySW5mby5zZXRVc2VySW5mbyhjVXNlckluZm8uZ2V0VXNlckluZm8oKSk7XG4gICAgaGFuZGxlT3ZlcmxheShcIiNvdmVybGF5X19wcm9maWxlLWVkaXRcIik7XG4gIH0pO1xuICAvLyBuYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWVJbnB1dC52YWx1ZTtcbiAgLy8gam9iRWxlbWVudC50ZXh0Q29udGVudCA9IGpvYklucHV0LnZhbHVlO1xufVxuXG4vLyBwb3AtdXAgYWRkIG5ldyBwbGFjZVxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgYXBpLnBvc3ROZXdDYXJkKHBsYWNlSW5wdXQudmFsdWUsIGltYWdlVXJsSW5wdXQudmFsdWUpLnRoZW4oKGRhdGEpID0+IHtcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoZGF0YS5saW5rLCBkYXRhLm5hbWUpO1xuICAgIGdyaWQucHJlcGVuZChjYXJkLmdlbmVyYXRlQ2FyZCgpKTtcblxuICAgIGhhbmRsZU92ZXJsYXkoXCIjb3ZlcmxheV9fY2FyZC1hZGRcIik7XG4gIH0pO1xufVxuXG4vLyBjb2RpZ28gZGUgbGEgZ2FsZXJpYVxuZnVuY3Rpb24gcmVuZGVyR2FsbGVyeSgpIHtcbiAgLy9vYnRlbmVyIGdyaWQgZGUgbGEgZ2FsZXJpYVxuICBjb25zdCBncmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19lbGVtZW50cy1ncmlkXCIpO1xuICBhcGkuZ2V0SW5pdGlhbENhcmRzKCkudGhlbigoZGF0YSkgPT4ge1xuICAgIC8vY3JlYSBlbCBncmlkIGRlIGxhIGdhbGVyaWFcbiAgICBkYXRhLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLmxpbmssIGl0ZW0ubmFtZSwgaXRlbS5saWtlcyk7XG4gICAgICAvL2FncmVnYWxvIGFsIGdyaWQgZGVzZGUgZWwgb2JqZXRvIGNhcmQsIGxsYW1hbmRvIGFsIG1ldG9kbyBnZW5lcmF0ZUNhcmRcbiAgICAgIGdyaWQuYXBwZW5kKGNhcmQuZ2VuZXJhdGVDYXJkKCkpO1xuICAgIH0pO1xuICB9KTtcbiAgZW5hYmxlVmFsaWRhdGlvbigpO1xufVxuXG4vLyBhw7FhZGUgYSB0b2RvcyBsb3MgZm9ybXVsYXJpb3MgbGEgdmFsaWRhY2nDs24gZGUgbGEgY2xhc2UgRm9ybVZhbGlkYXRvclxuZnVuY3Rpb24gZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIub3ZlcmxheV9fZm9ybVwiKSk7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgY29uc3Qgb0Zvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgICAgIHtcbiAgICAgICAgaW5wdXQ6IFwiLm92ZXJsYXlfX3RleHQtaW5wdXRcIixcbiAgICAgICAgYnV0dG9uOiBcIi5vdmVybGF5X19mb3JtLXN1Ym1pdC1idXR0b25cIixcbiAgICAgIH0sXG4gICAgICBmb3JtRWxlbWVudFxuICAgICk7XG4gICAgb0Zvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn1cblxucmVuZGVyR2FsbGVyeSgpO1xuIl0sIm5hbWVzIjpbIlBvcHVwIiwib3ZlcmxheUVsZW1lbnQiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwia2V5IiwidmFsdWUiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJldmVudCIsIl9pZGVudGlmaWNhT3ZlcmxheUFiaWVydG8iLCJoYW5kbGVPdmVybGF5IiwiY2xhc3NOYW1lIiwiaW5kZXhPZiIsIl90aGlzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsIlBvcHVwV2l0aEltYWdlIiwiX1BvcHVwIiwiX2luaGVyaXRzIiwiX3N1cGVyIiwiY2FsbCIsImxpbmsiLCJuYW1lIiwiaW1hZ2VQcmV2aWV3IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic3JjIiwiYWx0IiwiaW1hZ2VDYXB0aW9uIiwidGV4dENvbnRlbnQiLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiQ2FyZCIsImxpa2VzIiwiYnRuTGlrZSIsImVsZW1lbnQiLCJyZW1vdmUiLCJfaGFuZGxlTGlrZSIsImJ0bkRlbGV0ZSIsIm92ZXJsYXlDYXJkRGVsZXRlIiwiY2FyZEltYWdlIiwib25jbGljayIsIm92ZXJsYXlDYXJkUHJldmlldyIsImNhcmRUZW1wbGF0ZSIsImNhcmRJdGVtIiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmRUaXRsZSIsImNhcmRMaWtlcyIsImxlbmd0aCIsIl9zZXRFdmVudHMiLCJGb3JtVmFsaWRhdG9yIiwib1ZhbGlkYXRlSW5wdXRzIiwiZVZhbGlkYXRlRm9ybSIsIl9kZWZpbmVQcm9wZXJ0eSIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImNvbmNhdCIsImlkIiwiYWRkIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiaW5wdXRMaXN0Iiwic29tZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJidXR0b25FbGVtZW50IiwiZGlzYWJsZWQiLCJmdiIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dCIsImJ1dHRvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJpZGVudGlmaWNhT3ZlcmxheUFiaWVydG8iLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiaXRlbSIsIkFwaSIsIm9wdGlvbnMiLCJfYmFzZVVSTCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIlVzZXJJbmZvIiwiX3JlZiIsIm5hbWVFbGVtZW50Iiwiam9iRWxlbWVudCIsImltYWdlbkVsZW1lbnQiLCJqb2IiLCJpbWFnZW4iLCJfcmVmMiIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwicGxhY2VJbnB1dCIsImltYWdlVXJsSW5wdXQiLCJncmlkIiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsImdldEluaXRpYWxVc2VyTWUiLCJkYXRhIiwiYXZhdGFyIiwiY1VzZXJJbmZvIiwic2V0VXNlckluZm8iLCJnZXRVc2VySW5mbyIsInBhdGNoSW5pdGlhbFVzZXJNZSIsInBvc3ROZXdDYXJkIiwiY2FyZCIsInByZXBlbmQiLCJnZW5lcmF0ZUNhcmQiLCJnZXRJbml0aWFsQ2FyZHMiLCJhcHBlbmQiLCJmb3JtRWxlbWVudCIsImVuYWJsZVZhbGlkYXRpb24iLCJyZW5kZXJHYWxsZXJ5Il0sInNvdXJjZVJvb3QiOiIifQ==