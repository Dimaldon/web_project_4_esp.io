!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.overlayElement=t}var n,r;return n=e,(r=[{key:"handleOverlay",value:function(){this.overlayElement.classList.toggle("overlay__visible")}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this._identificaOverlayAbierto()&&this.handleOverlay()}},{key:"_identificaOverlayAbierto",value:function(){return this.overlayElement.className.indexOf("overlay__visible")>-1}},{key:"setEventListeners",value:function(){var e=this;this.overlayElement.addEventListener("click",(function(t){t.target!==e.overlayElement&&-1==t.target.className.indexOf("overlay__form-close-button")||e._identificaOverlayAbierto()&&e.handleOverlay()}))}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}function i(){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},i.apply(this,arguments)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(f,e);var t,n,u,c,s=(u=f,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(u);if(c){var n=l(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function f(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),s.call(this,e)}return t=f,(n=[{key:"handleOverlay",value:function(e,t){this.imagePreview=document.querySelector(".overlay__preview-image"),this.imagePreview.src=e,this.imagePreview.alt=t,this.imageCaption=document.querySelector(".overlay__preview-caption"),this.imageCaption.textContent=t,i(l(f.prototype),"handleOverlay",this).call(this)}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(n);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===c(o)?o:String(o)),r)}var o}var f=function(){function e(t,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cardData=t,this.link=t.link,this.name=t.name,this.likes=t.likes,this.myCard=n,this.handleDeleteClick=r,this.handleLikeAdd=o,this.handleLikeDelete=i}var t,n;return t=e,(n=[{key:"handleRemoveLike",value:function(){this.btnLike.classList.remove("content__elements__button-like-active")}},{key:"handleAddLike",value:function(){this.btnLike.classList.add("content__elements__button-like-active")}},{key:"_deleteCard",value:function(){this.element.remove()}},{key:"_setEvents",value:function(){var e=this;this.btnLike.addEventListener("click",(function(){e.btnLike.className.indexOf("content__elements__button-like-active")>-1?e.handleLikeDelete(e.cardData._id):e.handleLikeAdd(e.cardData._id)})),this.btnDelete.addEventListener("click",(function(){e.handleDeleteClick(e.cardData._id)})),this.cardImage.onclick=function(){var t=document.querySelector("#overlayCardPreview");new u(t).handleOverlay(e.link,e.name)}}},{key:"setCardLikes",value:function(){this.cardLikes.textContent=this.likes.length}},{key:"generateCard",value:function(){var e=document.querySelector(".card__template");return this.cardItem=e.content.cloneNode(!0),this.element=this.cardItem.querySelector(".elements"),this.cardImage=this.element.querySelector(".content__elements-image"),this.cardTitle=this.element.querySelector(".content__elements-title"),this.cardLikes=this.element.querySelector(".content__elements__numbers-like"),this.btnLike=this.element.querySelector(".content__elements__button-like"),this.btnDelete=this.cardItem.querySelector(".content__elements__delete-button"),this.myCard||this.btnDelete.remove(),this.cardImage.src=this.link,this.cardTitle.textContent=this.name,this.setCardLikes(),this._setEvents(),this.element}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function d(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===m(t)?t:String(t)}var b=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"_showInputError",(function(e,t){r.errorElement=r.eValidateForm.querySelector(".".concat(e.id,"-error")),e.classList.add("form__input_type_error"),r.errorElement.textContent=t,r.errorElement.classList.add("form__input-error_active")})),d(this,"_hideInputError",(function(e){r.errorElement=r.eValidateForm.querySelector(".".concat(e.id,"-error")),e.classList.remove("form__input_type_error"),r.errorElement.classList.remove("form__input-error_active"),r.errorElement.textContent=""})),d(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),d(this,"_hasInvalidInput",(function(){return r.inputList.some((function(e){return!e.validity.valid}))})),d(this,"_toggleButtonState",(function(){r._hasInvalidInput()?(r.buttonElement.classList.add("overlay__form-button-disabled"),r.buttonElement.disabled=!0):(r.buttonElement.classList.remove("overlay__form-button-disabled"),r.buttonElement.disabled=!1)})),d(this,"_setEventListeners",(function(){var e=r;r.inputList=Array.from(r.eValidateForm.querySelectorAll(r.oValidateInputs.input)),r.buttonElement=r.eValidateForm.querySelector(r.oValidateInputs.button),r._toggleButtonState(),r.inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))})),this.oValidateInputs=t,this.eValidateForm=n}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this.eValidateForm.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e){document.querySelector(e).classList.toggle("overlay__visible")}function p(){return document.getElementsByClassName("overlay__visible").length>0?document.getElementsByClassName("overlay__visible")[0].id:null}function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===_(o)?o:String(o)),r)}var o}document.querySelector(".content__profile-button-edit").addEventListener("click",(function(){h("#overlay__profile-edit")})),document.querySelector(".content__profile-button-add").addEventListener("click",(function(){h("#overlay__card-add")})),document.querySelectorAll(".overlay").forEach((function(e){e.addEventListener("click",(function(t){t.target!==e&&-1==t.target.className.indexOf("overlay__form-close-button")||null!=p()&&h("#"+p())}))})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&null!=p()&&h("#"+p())}));var E=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseURL=t.baseUrl,this._headers=t.headers}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return fetch(this._baseURL+"/cards",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"getInitialUserMe",value:function(){return fetch(this._baseURL+"/users/me",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"patchInitialUserMe",value:function(e,t){return fetch(this._baseURL+"/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"postNewCard",value:function(e,t){return fetch(this._baseURL+"/cards",{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"deleteCard",value:function(e){return fetch(this._baseURL+"/cards/"+e,{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"putLikeButtonCard",value:function(e){return fetch(this._baseURL+"/cards/likes/"+e,{method:"PUT",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"deleteLikeButtonCard",value:function(e){return fetch(this._baseURL+"/cards/likes/"+e,{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"updateUserMeAvatar",value:function(e){return fetch(this._baseURL+"/users/me/avatar",{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}])&&g(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==S(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===S(o)?o:String(o)),r)}var o}var j=function(){function e(t){var n=t.nameElement,r=t.jobElement,o=t.imagenElement,i=t.name,a=t.job,l=t.imagen;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nameElement=n,this.jobElement=r,this.imagenElement=o,this.name=i,this.job=a,this.imagen=l}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this.name,job:this.job,imagen:this.imagen}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.job,r=e.imagen;this.name=t,this.job=n,this.imagen=r,this.nameElement.textContent=this.name,this.jobElement.textContent=this.job,this.imagenElement.src=this.imagen}}])&&k(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==w(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}function L(){return L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},L.apply(this,arguments)}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var I,U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(r);if(o){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._handleImageFormDelete,t}return t=a,(n=[{key:"setHandleImageFormDelete",value:function(e){this._handleImageFormDelete=e}},{key:"setEventListeners",value:function(){var e=this;L(C(a.prototype),"setEventListeners",this).call(this),document.querySelector("#FormCardDelete").addEventListener("submit",(function(){e._handleImageFormDelete()}))}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(n),q=document.querySelector("#overlay__form-name"),D=document.querySelector("#overlay__form-job"),R=document.querySelector(".content__profile-title"),T=document.querySelector(".content__profile-description"),A=document.querySelector("#overlay__form-place"),x=document.querySelector("#overlay__form-imageURL"),F=document.querySelector("#overlay__form-avatar-update"),B=document.querySelector(".content__elements-grid"),V=document.querySelector(".content__profile-image"),N=new E({baseUrl:"https://around.nomoreparties.co/v1/web_es_cohort_03",headers:{authorization:"361c2497-73b4-4dd1-9a02-2225ff5963b5","Content-Type":"application/json"}});N.getInitialUserMe().then((function(e){var t=e.name,n=e.about,r=e.avatar;I=e._id;var o=new j({nameElement:R,jobElement:T,imagenElement:V,name:t,job:n,imagen:r});o.setUserInfo(o.getUserInfo()),function(){var e=document.querySelector(".content__elements-grid");N.getInitialCards().then((function(t){t.forEach((function(t){H({cardData:t,eContainer:e,idUser:I})}))})),Array.from(document.querySelectorAll(".overlay__form")).forEach((function(e){new b({input:".overlay__text-input",button:".overlay__form-submit-button"},e).enableValidation()}))}()})),V.addEventListener("click",(function(){new n(document.querySelector("#overlayAvatarUpdate"),(function(){N.updateUserMeAvatar(F.value).then((function(e){var t=e.name,n=e.about,r=e.avatar,o=new j({nameElement:R,jobElement:T,imagenElement:V,name:t,job:n,imagen:r});o.setUserInfo(o.getUserInfo()),h("#overlayAvatarUpdate")}))})).handleOverlay()})),document.querySelector("#profileForm").addEventListener("submit",(function(e){e.preventDefault(),N.patchInitialUserMe(q.value,D.value).then((function(e){var t=e.name,n=e.about,r=e.avatar,o=new j({nameElement:R,jobElement:T,imagenElement:V,name:t,job:n,imagen:r});o.setUserInfo(o.getUserInfo()),h("#overlay__profile-edit")}))})),document.querySelector("#imageForm").addEventListener("submit",(function(e){e.preventDefault(),N.postNewCard(A.value,x.value).then((function(e){H({cardData:e,eContainer:B,idUser:I}),h("#overlay__card-add")}))})),document.querySelector("#imageAvatar").addEventListener("submit",(function(e){e.preventDefault(),N.updateUserMeAvatar(F.value).then((function(e){var t=e.name,n=e.about,r=e.avatar,o=new j({nameElement:R,jobElement:T,imagenElement:V,name:t,job:n,imagen:r});o.setUserInfo(o.getUserInfo()),h("#overlayAvatarUpdate")}))}));var M=new U(document.querySelector("#overlayCardDelete"));function H(e){var t=new f(e.cardData,e.cardData.owner._id==e.idUser,(function(e){M.handleOverlay(),M.setHandleImageFormDelete((function(){N.deleteCard(e).then((function(){t._deleteCard(),M.handleOverlay()}))}))}),(function(e){N.putLikeButtonCard(e).then((function(e){t.likes=e.likes,t.handleAddLike(),t.setCardLikes()}))}),(function(e){N.deleteLikeButtonCard(e).then((function(e){t.likes=e.likes,t.handleRemoveLike(),t.setCardLikes()}))}));e.eContainer.append(t.generateCard())}M.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixFQUFLaEgsTUFBUWdHLEVBQUtoRyxNQUNsQmdILEVBQUtTLG1CQUNMVCxFQUFLL0YsY0FDUCxHQUNGLElBR0Y4RixFQUFZVCxXQUFXb0IsT0FBT1YsRUFBS1csZUFDckMsQ0FoQ0FiLEVBQWlCYyxtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLmlvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AuaW8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC5pby8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AuaW8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLmlvLy4vc3JjL2NvbXBvbmVudHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AuaW8vLi9zcmMvY29tcG9uZW50cy9hcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AuaW8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC5pby8uL3NyYy9jb21wb25lbnRzL1BvcFVwRGVsZXRlSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AuaW8vLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihvdmVybGF5RWxlbWVudCkge1xuICAgIHRoaXMub3ZlcmxheUVsZW1lbnQgPSBvdmVybGF5RWxlbWVudDtcbiAgfVxuXG4gIGhhbmRsZU92ZXJsYXkoKSB7XG4gICAgdGhpcy5vdmVybGF5RWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwib3ZlcmxheV9fdmlzaWJsZVwiKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldmVudCkge1xuICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuX2lkZW50aWZpY2FPdmVybGF5QWJpZXJ0bygpID8gdGhpcy5oYW5kbGVPdmVybGF5KCkgOiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIF9pZGVudGlmaWNhT3ZlcmxheUFiaWVydG8oKSB7XG4gICAgcmV0dXJuIHRoaXMub3ZlcmxheUVsZW1lbnQuY2xhc3NOYW1lLmluZGV4T2YoXCJvdmVybGF5X192aXNpYmxlXCIpID4gLTE7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLm92ZXJsYXlFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZXZlbnQudGFyZ2V0ICE9PSB0aGlzLm92ZXJsYXlFbGVtZW50ICYmXG4gICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc05hbWUuaW5kZXhPZihcIm92ZXJsYXlfX2Zvcm0tY2xvc2UtYnV0dG9uXCIpID09IC0xXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5faWRlbnRpZmljYU92ZXJsYXlBYmllcnRvKCkgPyB0aGlzLmhhbmRsZU92ZXJsYXkoKSA6IG51bGw7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKG92ZXJsYXlFbGVtZW50KSB7XG4gICAgc3VwZXIob3ZlcmxheUVsZW1lbnQpO1xuICB9XG5cbiAgaGFuZGxlT3ZlcmxheShsaW5rLCBuYW1lKSB7XG4gICAgdGhpcy5pbWFnZVByZXZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlfX3ByZXZpZXctaW1hZ2VcIik7XG4gICAgdGhpcy5pbWFnZVByZXZpZXcuc3JjID0gbGluaztcbiAgICB0aGlzLmltYWdlUHJldmlldy5hbHQgPSBuYW1lO1xuICAgIHRoaXMuaW1hZ2VDYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5X19wcmV2aWV3LWNhcHRpb25cIik7XG4gICAgdGhpcy5pbWFnZUNhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLmhhbmRsZU92ZXJsYXkoKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICBjYXJkRGF0YSxcbiAgICBteUNhcmQsXG4gICAgaGFuZGxlRGVsZXRlQ2xpY2ssXG4gICAgaGFuZGxlTGlrZUFkZCxcbiAgICBoYW5kbGVMaWtlRGVsZXRlXG4gICkge1xuICAgIHRoaXMuY2FyZERhdGEgPSBjYXJkRGF0YTtcbiAgICB0aGlzLmxpbmsgPSBjYXJkRGF0YS5saW5rO1xuICAgIHRoaXMubmFtZSA9IGNhcmREYXRhLm5hbWU7XG4gICAgdGhpcy5saWtlcyA9IGNhcmREYXRhLmxpa2VzO1xuICAgIHRoaXMubXlDYXJkID0gbXlDYXJkO1xuICAgIHRoaXMuaGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcbiAgICB0aGlzLmhhbmRsZUxpa2VBZGQgPSBoYW5kbGVMaWtlQWRkO1xuICAgIHRoaXMuaGFuZGxlTGlrZURlbGV0ZSA9IGhhbmRsZUxpa2VEZWxldGU7XG4gIH1cblxuICBoYW5kbGVSZW1vdmVMaWtlKCkge1xuICAgIHRoaXMuYnRuTGlrZS5jbGFzc0xpc3QucmVtb3ZlKFwiY29udGVudF9fZWxlbWVudHNfX2J1dHRvbi1saWtlLWFjdGl2ZVwiKTtcbiAgfVxuXG4gIGhhbmRsZUFkZExpa2UoKSB7XG4gICAgdGhpcy5idG5MaWtlLmNsYXNzTGlzdC5hZGQoXCJjb250ZW50X19lbGVtZW50c19fYnV0dG9uLWxpa2UtYWN0aXZlXCIpO1xuICB9XG5cbiAgX2RlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5lbGVtZW50LnJlbW92ZSgpO1xuICB9XG5cbiAgX3NldEV2ZW50cygpIHtcbiAgICB0aGlzLmJ0bkxpa2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5idG5MaWtlLmNsYXNzTmFtZS5pbmRleE9mKFxuICAgICAgICAgIFwiY29udGVudF9fZWxlbWVudHNfX2J1dHRvbi1saWtlLWFjdGl2ZVwiXG4gICAgICAgICkgPiAtMVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlTGlrZURlbGV0ZSh0aGlzLmNhcmREYXRhLl9pZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmhhbmRsZUxpa2VBZGQodGhpcy5jYXJkRGF0YS5faWQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5idG5EZWxldGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuaGFuZGxlRGVsZXRlQ2xpY2sodGhpcy5jYXJkRGF0YS5faWQpO1xuICAgIH0pO1xuICAgIHRoaXMuY2FyZEltYWdlLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICBjb25zdCBvdmVybGF5Q2FyZFByZXZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI292ZXJsYXlDYXJkUHJldmlld1wiKTtcbiAgICAgIGNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uob3ZlcmxheUNhcmRQcmV2aWV3KTtcbiAgICAgIHBvcHVwSW1hZ2UuaGFuZGxlT3ZlcmxheSh0aGlzLmxpbmssIHRoaXMubmFtZSk7XG4gICAgfTtcbiAgfVxuXG4gIHNldENhcmRMaWtlcygpIHtcbiAgICB0aGlzLmNhcmRMaWtlcy50ZXh0Q29udGVudCA9IHRoaXMubGlrZXMubGVuZ3RoO1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGVtcGxhdGVcIik7XG4gICAgdGhpcy5jYXJkSXRlbSA9IGNhcmRUZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgICB0aGlzLmVsZW1lbnQgPSB0aGlzLmNhcmRJdGVtLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNcIik7XG4gICAgdGhpcy5jYXJkSW1hZ2UgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19lbGVtZW50cy1pbWFnZVwiKTtcbiAgICB0aGlzLmNhcmRUaXRsZSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX2VsZW1lbnRzLXRpdGxlXCIpO1xuICAgIHRoaXMuY2FyZExpa2VzID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5jb250ZW50X19lbGVtZW50c19fbnVtYmVycy1saWtlXCJcbiAgICApO1xuICAgIHRoaXMuYnRuTGlrZSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuY29udGVudF9fZWxlbWVudHNfX2J1dHRvbi1saWtlXCJcbiAgICApO1xuICAgIHRoaXMuYnRuRGVsZXRlID0gdGhpcy5jYXJkSXRlbS5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuY29udGVudF9fZWxlbWVudHNfX2RlbGV0ZS1idXR0b25cIlxuICAgICk7XG4gICAgaWYgKCF0aGlzLm15Q2FyZCkgdGhpcy5idG5EZWxldGUucmVtb3ZlKCk7XG4gICAgdGhpcy5jYXJkSW1hZ2Uuc3JjID0gdGhpcy5saW5rO1xuICAgIHRoaXMuY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5uYW1lO1xuICAgIHRoaXMuc2V0Q2FyZExpa2VzKCk7XG4gICAgdGhpcy5fc2V0RXZlbnRzKCk7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKG9WYWxpZGF0ZUlucHV0cywgZVZhbGlkYXRlRm9ybSkge1xuICAgIHRoaXMub1ZhbGlkYXRlSW5wdXRzID0gb1ZhbGlkYXRlSW5wdXRzO1xuICAgIHRoaXMuZVZhbGlkYXRlRm9ybSA9IGVWYWxpZGF0ZUZvcm07XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpID0+IHtcbiAgICB0aGlzLmVycm9yRWxlbWVudCA9IHRoaXMuZVZhbGlkYXRlRm9ybS5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIik7XG4gICAgdGhpcy5lcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgdGhpcy5lcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWVycm9yX2FjdGl2ZVwiKTtcbiAgfTtcblxuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgdGhpcy5lcnJvckVsZW1lbnQgPSB0aGlzLmVWYWxpZGF0ZUZvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIpO1xuICAgIHRoaXMuZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmVcIik7XG4gICAgdGhpcy5lcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9O1xuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH07XG5cbiAgX2hhc0ludmFsaWRJbnB1dCA9ICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy5pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfTtcblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm92ZXJsYXlfX2Zvcm0tYnV0dG9uLWRpc2FibGVkXCIpO1xuICAgICAgdGhpcy5idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJvdmVybGF5X19mb3JtLWJ1dHRvbi1kaXNhYmxlZFwiKTtcbiAgICAgIHRoaXMuYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgY29uc3QgZnYgPSB0aGlzO1xuICAgIHRoaXMuaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuZVZhbGlkYXRlRm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMub1ZhbGlkYXRlSW5wdXRzLmlucHV0KVxuICAgICk7XG4gICAgdGhpcy5idXR0b25FbGVtZW50ID0gdGhpcy5lVmFsaWRhdGVGb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLm9WYWxpZGF0ZUlucHV0cy5idXR0b25cbiAgICApO1xuXG4gICAgLy9kZXNhY3RpdmEgZWwgYm90b24gZGUgc3VibWl0XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIC8vYWdyZWdhIGxvcyBldmVudG9zIGRlIGVzY3VjaGEgYSBjYWRhIGlucHV0XG4gICAgdGhpcy5pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnYuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICBmdi5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5lVmFsaWRhdGVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICAvL2VzdGFibGVjZSBsb3MgZXZlbnRvcyBkZSBlc2N1Y2hhIHBhcmEgY2FkYSBmb3JtdWxhcmlvXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZU92ZXJsYXkoaWQpIHtcbiAgY29uc3Qgb3ZlcmxheUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGlkKTtcbiAgb3ZlcmxheUVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShcIm92ZXJsYXlfX3Zpc2libGVcIik7XG59XG5cbi8vIGFicmlyIGZvcm11bGFyaW8gZGVsIHBlcmZpbFxuZG9jdW1lbnRcbiAgLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudF9fcHJvZmlsZS1idXR0b24tZWRpdFwiKVxuICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBoYW5kbGVPdmVybGF5KFwiI292ZXJsYXlfX3Byb2ZpbGUtZWRpdFwiKTtcbiAgfSk7XG5cbi8vIGFicmlyIHBvcC11cCBkZSBudWV2byBsdWdhclxuZG9jdW1lbnRcbiAgLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudF9fcHJvZmlsZS1idXR0b24tYWRkXCIpXG4gIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgIGhhbmRsZU92ZXJsYXkoXCIjb3ZlcmxheV9fY2FyZC1hZGRcIik7XG4gIH0pO1xuXG4vLyBjaWVycmUgY29uIHRlY2xhIFhcbmNvbnN0IG92ZXJsYXlzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5vdmVybGF5XCIpO1xub3ZlcmxheXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICBpZiAoXG4gICAgICBldmVudC50YXJnZXQgIT09IGl0ZW0gJiZcbiAgICAgIGV2ZW50LnRhcmdldC5jbGFzc05hbWUuaW5kZXhPZihcIm92ZXJsYXlfX2Zvcm0tY2xvc2UtYnV0dG9uXCIpID09IC0xXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlkZW50aWZpY2FPdmVybGF5QWJpZXJ0bygpICE9IG51bGxcbiAgICAgID8gaGFuZGxlT3ZlcmxheShcIiNcIiArIGlkZW50aWZpY2FPdmVybGF5QWJpZXJ0bygpKVxuICAgICAgOiBudWxsO1xuICB9KTtcbn0pO1xuXG4vLyBjaWVycmUgY29uIHRlY2xhIGVzY2FwZVxuY29uc3Qga2V5ZG93bkxpc3RlbmVyID0gKGV2ZW50KSA9PiB7XG4gIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICBpZGVudGlmaWNhT3ZlcmxheUFiaWVydG8oKSAhPSBudWxsXG4gICAgICA/IGhhbmRsZU92ZXJsYXkoXCIjXCIgKyBpZGVudGlmaWNhT3ZlcmxheUFiaWVydG8oKSlcbiAgICAgIDogbnVsbDtcbiAgfVxufTtcblxuZnVuY3Rpb24gaWRlbnRpZmljYU92ZXJsYXlBYmllcnRvKCkge1xuICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm92ZXJsYXlfX3Zpc2libGVcIikubGVuZ3RoID4gMFxuICAgID8gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm92ZXJsYXlfX3Zpc2libGVcIilbMF0uaWRcbiAgICA6IG51bGw7XG59XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGtleWRvd25MaXN0ZW5lcik7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgLy8gY3VlcnBvIGRlbCBjb25zdHJ1Y3RvclxuICAgIHRoaXMuX2Jhc2VVUkwgPSBvcHRpb25zLmJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVSTCArIFwiL2NhcmRzXCIsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgLy8gc2kgZWwgc2Vydmlkb3IgZGV2dWVsdmUgdW4gZXJyb3IsIHJlY2hhemEgZWwgcHJvbWlzZVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0SW5pdGlhbFVzZXJNZSgpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVSTCArIFwiL3VzZXJzL21lXCIsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgLy8gc2kgZWwgc2Vydmlkb3IgZGV2dWVsdmUgdW4gZXJyb3IsIHJlY2hhemEgZWwgcHJvbWlzZVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgcGF0Y2hJbml0aWFsVXNlck1lKG5hbWUsIGFib3V0KSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVUkwgKyBcIi91c2Vycy9tZVwiLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIGFib3V0OiBhYm91dCxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIC8vIHNpIGVsIHNlcnZpZG9yIGRldnVlbHZlIHVuIGVycm9yLCByZWNoYXphIGVsIHByb21pc2VcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIHBvc3ROZXdDYXJkKG5hbWUsIGxpbmspIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVSTCArIFwiL2NhcmRzXCIsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICBsaW5rOiBsaW5rLFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgLy8gc2kgZWwgc2Vydmlkb3IgZGV2dWVsdmUgdW4gZXJyb3IsIHJlY2hhemEgZWwgcHJvbWlzZVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVSTCArIFwiL2NhcmRzL1wiICsgY2FyZElkLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIC8vIHNpIGVsIHNlcnZpZG9yIGRldnVlbHZlIHVuIGVycm9yLCByZWNoYXphIGVsIHByb21pc2VcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1dExpa2VCdXR0b25DYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVVJMICsgXCIvY2FyZHMvbGlrZXMvXCIgKyBjYXJkSWQsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgLy8gc2kgZWwgc2Vydmlkb3IgZGV2dWVsdmUgdW4gZXJyb3IsIHJlY2hhemEgZWwgcHJvbWlzZVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlTGlrZUJ1dHRvbkNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVUkwgKyBcIi9jYXJkcy9saWtlcy9cIiArIGNhcmRJZCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9XG4gICAgICAvLyBzaSBlbCBzZXJ2aWRvciBkZXZ1ZWx2ZSB1biBlcnJvciwgcmVjaGF6YSBlbCBwcm9taXNlXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGVVc2VyTWVBdmF0YXIoYXZhdGFyKSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVUkwgKyBcIi91c2Vycy9tZS9hdmF0YXJcIiwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IGF2YXRhcixcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIC8vIHNpIGVsIHNlcnZpZG9yIGRldnVlbHZlIHVuIGVycm9yLCByZWNoYXphIGVsIHByb21pc2VcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWVFbGVtZW50LCBqb2JFbGVtZW50LCBpbWFnZW5FbGVtZW50LCBuYW1lLCBqb2IsIGltYWdlbiB9KSB7XG4gICAgdGhpcy5uYW1lRWxlbWVudCA9IG5hbWVFbGVtZW50O1xuICAgIHRoaXMuam9iRWxlbWVudCA9IGpvYkVsZW1lbnQ7XG4gICAgdGhpcy5pbWFnZW5FbGVtZW50ID0gaW1hZ2VuRWxlbWVudDtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMuam9iID0gam9iO1xuICAgIHRoaXMuaW1hZ2VuID0gaW1hZ2VuO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHsgbmFtZTogdGhpcy5uYW1lLCBqb2I6IHRoaXMuam9iLCBpbWFnZW46IHRoaXMuaW1hZ2VuIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGpvYiwgaW1hZ2VuIH0pIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMuam9iID0gam9iO1xuICAgIHRoaXMuaW1hZ2VuID0gaW1hZ2VuO1xuICAgIHRoaXMubmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLm5hbWU7XG4gICAgdGhpcy5qb2JFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5qb2I7XG4gICAgdGhpcy5pbWFnZW5FbGVtZW50LnNyYyA9IHRoaXMuaW1hZ2VuO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wVXBEZWxldGVJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Iob3ZlcmxheUVsZW1lbnQpIHtcbiAgICBzdXBlcihvdmVybGF5RWxlbWVudCk7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VGb3JtRGVsZXRlO1xuICB9XG5cbiAgc2V0SGFuZGxlSW1hZ2VGb3JtRGVsZXRlKGhhbmRsZUFjdGlvbikge1xuICAgIHRoaXMuX2hhbmRsZUltYWdlRm9ybURlbGV0ZSA9IGhhbmRsZUFjdGlvbjtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNGb3JtQ2FyZERlbGV0ZVwiKS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlRm9ybURlbGV0ZSgpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgXCIuL3BhZ2UvaW5kZXguY3NzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IHsgaGFuZGxlT3ZlcmxheSB9IGZyb20gXCIuL2NvbXBvbmVudHMvdXRpbHNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4vY29tcG9uZW50cy9hcGlcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi9jb21wb25lbnRzL1VzZXJJbmZvXCI7XG5pbXBvcnQgUG9wVXBEZWxldGVJbWFnZSBmcm9tIFwiLi9jb21wb25lbnRzL1BvcFVwRGVsZXRlSW1hZ2VcIjtcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi9jb21wb25lbnRzL1BvcHVwXCI7XG4vL3ZhcmlhYmxlIHF1ZSBhbG1hY2VuYSBlbCBhcnJheSBkZSBvYmpldG9zIGNvbiBsYXMgNiBjYXJkcyBpbmljaWFsZXNcbmNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3ZlcmxheV9fZm9ybS1uYW1lXCIpLFxuICBqb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3ZlcmxheV9fZm9ybS1qb2JcIiksXG4gIG5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19wcm9maWxlLXRpdGxlXCIpLFxuICBqb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19wcm9maWxlLWRlc2NyaXB0aW9uXCIpLFxuICBwbGFjZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5X19mb3JtLXBsYWNlXCIpLFxuICBpbWFnZVVybElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvdmVybGF5X19mb3JtLWltYWdlVVJMXCIpLFxuICBhdmF0YXJJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3ZlcmxheV9fZm9ybS1hdmF0YXItdXBkYXRlXCIpLFxuICBncmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19lbGVtZW50cy1ncmlkXCIpLFxuICBpbWFnZW5FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19wcm9maWxlLWltYWdlXCIpLFxuICBhcGkgPSBuZXcgQXBpKHtcbiAgICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViX2VzX2NvaG9ydF8wM1wiLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIGF1dGhvcml6YXRpb246IFwiMzYxYzI0OTctNzNiNC00ZGQxLTlhMDItMjIyNWZmNTk2M2I1XCIsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICB9LFxuICB9KTtcbmxldCBuSWRVc2VyO1xuYXBpLmdldEluaXRpYWxVc2VyTWUoKS50aGVuKChkYXRhKSA9PiB7XG4gIGNvbnN0IG5hbWUgPSBkYXRhLm5hbWU7XG4gIGNvbnN0IGpvYiA9IGRhdGEuYWJvdXQ7XG4gIGNvbnN0IGltYWdlbiA9IGRhdGEuYXZhdGFyO1xuICBuSWRVc2VyID0gZGF0YS5faWQ7XG4gIGNvbnN0IGNVc2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gICAgbmFtZUVsZW1lbnQsXG4gICAgam9iRWxlbWVudCxcbiAgICBpbWFnZW5FbGVtZW50LFxuICAgIG5hbWUsXG4gICAgam9iLFxuICAgIGltYWdlbixcbiAgfSk7XG4gIGNVc2VySW5mby5zZXRVc2VySW5mbyhjVXNlckluZm8uZ2V0VXNlckluZm8oKSk7XG4gIHJlbmRlckdhbGxlcnkoKTtcbn0pO1xuXG5pbWFnZW5FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IG9wZW5BdmF0YXJQb3B1cCA9IG5ldyBQb3B1cChcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI292ZXJsYXlBdmF0YXJVcGRhdGVcIiksXG4gICAgZnVuY3Rpb24gKCkge1xuICAgICAgYXBpLnVwZGF0ZVVzZXJNZUF2YXRhcihhdmF0YXJJbnB1dC52YWx1ZSkudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICBjb25zdCBuYW1lID0gZGF0YS5uYW1lO1xuICAgICAgICBjb25zdCBqb2IgPSBkYXRhLmFib3V0O1xuICAgICAgICBjb25zdCBpbWFnZW4gPSBkYXRhLmF2YXRhcjtcbiAgICAgICAgY29uc3QgY1VzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgICAgICAgICBuYW1lRWxlbWVudCxcbiAgICAgICAgICBqb2JFbGVtZW50LFxuICAgICAgICAgIGltYWdlbkVsZW1lbnQsXG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICBqb2IsXG4gICAgICAgICAgaW1hZ2VuLFxuICAgICAgICB9KTtcbiAgICAgICAgY1VzZXJJbmZvLnNldFVzZXJJbmZvKGNVc2VySW5mby5nZXRVc2VySW5mbygpKTtcbiAgICAgICAgaGFuZGxlT3ZlcmxheShcIiNvdmVybGF5QXZhdGFyVXBkYXRlXCIpO1xuICAgICAgfSk7XG4gICAgfVxuICApO1xuICBvcGVuQXZhdGFyUG9wdXAuaGFuZGxlT3ZlcmxheSgpO1xufSk7XG5cbi8vIHBvcC11cCBjYXJkIHByZXZpZXdcbmRvY3VtZW50XG4gIC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVGb3JtXCIpXG4gIC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcblxuZG9jdW1lbnRcbiAgLnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2VGb3JtXCIpXG4gIC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUltYWdlRm9ybVN1Ym1pdCk7XG5cbmRvY3VtZW50XG4gIC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlQXZhdGFyXCIpXG4gIC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUF2YXRhclByb2ZpbGVGb3JtU3VibWl0KTtcblxuLy8gcG9wLXVwIGVkaXQgcHJvZmlsZVxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBhcGkucGF0Y2hJbml0aWFsVXNlck1lKG5hbWVJbnB1dC52YWx1ZSwgam9iSW5wdXQudmFsdWUpLnRoZW4oKGRhdGEpID0+IHtcbiAgICBjb25zdCBuYW1lID0gZGF0YS5uYW1lO1xuICAgIGNvbnN0IGpvYiA9IGRhdGEuYWJvdXQ7XG4gICAgY29uc3QgaW1hZ2VuID0gZGF0YS5hdmF0YXI7XG4gICAgY29uc3QgY1VzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgICAgIG5hbWVFbGVtZW50LFxuICAgICAgam9iRWxlbWVudCxcbiAgICAgIGltYWdlbkVsZW1lbnQsXG4gICAgICBuYW1lLFxuICAgICAgam9iLFxuICAgICAgaW1hZ2VuLFxuICAgIH0pO1xuICAgIGNVc2VySW5mby5zZXRVc2VySW5mbyhjVXNlckluZm8uZ2V0VXNlckluZm8oKSk7XG4gICAgaGFuZGxlT3ZlcmxheShcIiNvdmVybGF5X19wcm9maWxlLWVkaXRcIik7XG4gIH0pO1xufVxuXG4vLyBwb3AtdXAgYWRkIG5ldyBwbGFjZVxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICBhcGkucG9zdE5ld0NhcmQocGxhY2VJbnB1dC52YWx1ZSwgaW1hZ2VVcmxJbnB1dC52YWx1ZSkudGhlbigoZGF0YSkgPT4ge1xuICAgIGNyZWF0ZUNhcmQoe1xuICAgICAgY2FyZERhdGE6IGRhdGEsXG4gICAgICBlQ29udGFpbmVyOiBncmlkLFxuICAgICAgaWRVc2VyOiBuSWRVc2VyLFxuICAgIH0pO1xuXG4gICAgaGFuZGxlT3ZlcmxheShcIiNvdmVybGF5X19jYXJkLWFkZFwiKTtcbiAgfSk7XG59XG5cbi8vIHBvcC11cCB1cGRhdGUgYXZhdGFyXG5cbmZ1bmN0aW9uIGhhbmRsZUF2YXRhclByb2ZpbGVGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgYXBpLnVwZGF0ZVVzZXJNZUF2YXRhcihhdmF0YXJJbnB1dC52YWx1ZSkudGhlbigoZGF0YSkgPT4ge1xuICAgIGNvbnN0IG5hbWUgPSBkYXRhLm5hbWU7XG4gICAgY29uc3Qgam9iID0gZGF0YS5hYm91dDtcbiAgICBjb25zdCBpbWFnZW4gPSBkYXRhLmF2YXRhcjtcbiAgICBjb25zdCBjVXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICAgICAgbmFtZUVsZW1lbnQsXG4gICAgICBqb2JFbGVtZW50LFxuICAgICAgaW1hZ2VuRWxlbWVudCxcbiAgICAgIG5hbWUsXG4gICAgICBqb2IsXG4gICAgICBpbWFnZW4sXG4gICAgfSk7XG4gICAgY1VzZXJJbmZvLnNldFVzZXJJbmZvKGNVc2VySW5mby5nZXRVc2VySW5mbygpKTtcbiAgICBoYW5kbGVPdmVybGF5KFwiI292ZXJsYXlBdmF0YXJVcGRhdGVcIik7XG4gIH0pO1xufVxuXG4vLyBjb2RpZ28gZGUgbGEgZ2FsZXJpYVxuZnVuY3Rpb24gcmVuZGVyR2FsbGVyeSgpIHtcbiAgLy9vYnRlbmVyIGdyaWQgZGUgbGEgZ2FsZXJpYVxuICBjb25zdCBncmlkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19lbGVtZW50cy1ncmlkXCIpO1xuICBhcGkuZ2V0SW5pdGlhbENhcmRzKCkudGhlbigoZGF0YSkgPT4ge1xuICAgIC8vY3JlYSBlbCBncmlkIGRlIGxhIGdhbGVyaWFcbiAgICBkYXRhLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGNyZWF0ZUNhcmQoe1xuICAgICAgICBjYXJkRGF0YTogaXRlbSxcbiAgICAgICAgZUNvbnRhaW5lcjogZ3JpZCxcbiAgICAgICAgaWRVc2VyOiBuSWRVc2VyLFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuICBlbmFibGVWYWxpZGF0aW9uKCk7XG59XG5cbi8vIGHDsWFkZSBhIHRvZG9zIGxvcyBmb3JtdWxhcmlvcyBsYSB2YWxpZGFjacOzbiBkZSBsYSBjbGFzZSBGb3JtVmFsaWRhdG9yXG5mdW5jdGlvbiBlbmFibGVWYWxpZGF0aW9uKCkge1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5vdmVybGF5X19mb3JtXCIpKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBvRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICAgICAge1xuICAgICAgICBpbnB1dDogXCIub3ZlcmxheV9fdGV4dC1pbnB1dFwiLFxuICAgICAgICBidXR0b246IFwiLm92ZXJsYXlfX2Zvcm0tc3VibWl0LWJ1dHRvblwiLFxuICAgICAgfSxcbiAgICAgIGZvcm1FbGVtZW50XG4gICAgKTtcbiAgICBvRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gIH0pO1xufVxuXG5jb25zdCBvdmVybGF5Q2FyZERlbGV0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3ZlcmxheUNhcmREZWxldGVcIik7XG5leHBvcnQgY29uc3QgcG9wdXBEZWxldGVJbWFnZSA9IG5ldyBQb3BVcERlbGV0ZUltYWdlKG92ZXJsYXlDYXJkRGVsZXRlKTtcbnBvcHVwRGVsZXRlSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChvUHJvcGVydGllcykge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgb1Byb3BlcnRpZXMuY2FyZERhdGEsXG4gICAgb1Byb3BlcnRpZXMuY2FyZERhdGEub3duZXIuX2lkID09IG9Qcm9wZXJ0aWVzLmlkVXNlcixcbiAgICAobklkQ2FyZCkgPT4ge1xuICAgICAgcG9wdXBEZWxldGVJbWFnZS5oYW5kbGVPdmVybGF5KCk7XG4gICAgICBwb3B1cERlbGV0ZUltYWdlLnNldEhhbmRsZUltYWdlRm9ybURlbGV0ZSgoKSA9PiB7XG4gICAgICAgIGFwaS5kZWxldGVDYXJkKG5JZENhcmQpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIGNhcmQuX2RlbGV0ZUNhcmQoKTtcbiAgICAgICAgICBwb3B1cERlbGV0ZUltYWdlLmhhbmRsZU92ZXJsYXkoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIChuSWRDYXJkKSA9PiB7XG4gICAgICBhcGkucHV0TGlrZUJ1dHRvbkNhcmQobklkQ2FyZCkudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICBjYXJkLmxpa2VzID0gZGF0YS5saWtlcztcbiAgICAgICAgY2FyZC5oYW5kbGVBZGRMaWtlKCk7XG4gICAgICAgIGNhcmQuc2V0Q2FyZExpa2VzKCk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIChuSWRDYXJkKSA9PiB7XG4gICAgICBhcGkuZGVsZXRlTGlrZUJ1dHRvbkNhcmQobklkQ2FyZCkudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICBjYXJkLmxpa2VzID0gZGF0YS5saWtlcztcbiAgICAgICAgY2FyZC5oYW5kbGVSZW1vdmVMaWtlKCk7XG4gICAgICAgIGNhcmQuc2V0Q2FyZExpa2VzKCk7XG4gICAgICB9KTtcbiAgICB9XG4gICk7XG4gIC8vYWdyZWdhbG8gYWwgZ3JpZCBkZXNkZSBlbCBvYmpldG8gY2FyZCwgbGxhbWFuZG8gYWwgbWV0b2RvIGdlbmVyYXRlQ2FyZFxuICBvUHJvcGVydGllcy5lQ29udGFpbmVyLmFwcGVuZChjYXJkLmdlbmVyYXRlQ2FyZCgpKTtcbn1cbiJdLCJuYW1lcyI6WyJQb3B1cCIsIm92ZXJsYXlFbGVtZW50IiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImtleSIsInZhbHVlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZXZlbnQiLCJfaWRlbnRpZmljYU92ZXJsYXlBYmllcnRvIiwiaGFuZGxlT3ZlcmxheSIsImNsYXNzTmFtZSIsImluZGV4T2YiLCJfdGhpcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsIl9pbmhlcml0cyIsIl9zdXBlciIsImNhbGwiLCJsaW5rIiwibmFtZSIsImltYWdlUHJldmlldyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInNyYyIsImFsdCIsImltYWdlQ2FwdGlvbiIsInRleHRDb250ZW50IiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsIkNhcmQiLCJjYXJkRGF0YSIsIm15Q2FyZCIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlTGlrZUFkZCIsImhhbmRsZUxpa2VEZWxldGUiLCJsaWtlcyIsImJ0bkxpa2UiLCJyZW1vdmUiLCJhZGQiLCJlbGVtZW50IiwiX2lkIiwiYnRuRGVsZXRlIiwiY2FyZEltYWdlIiwib25jbGljayIsIm92ZXJsYXlDYXJkUHJldmlldyIsImNhcmRMaWtlcyIsImxlbmd0aCIsImNhcmRUZW1wbGF0ZSIsImNhcmRJdGVtIiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmRUaXRsZSIsInNldENhcmRMaWtlcyIsIl9zZXRFdmVudHMiLCJGb3JtVmFsaWRhdG9yIiwib1ZhbGlkYXRlSW5wdXRzIiwiZVZhbGlkYXRlRm9ybSIsIl9kZWZpbmVQcm9wZXJ0eSIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImNvbmNhdCIsImlkIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiaW5wdXRMaXN0Iiwic29tZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJidXR0b25FbGVtZW50IiwiZGlzYWJsZWQiLCJmdiIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dCIsImJ1dHRvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJpZGVudGlmaWNhT3ZlcmxheUFiaWVydG8iLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiaXRlbSIsIkFwaSIsIm9wdGlvbnMiLCJfYmFzZVVSTCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNhcmRJZCIsImF2YXRhciIsIlVzZXJJbmZvIiwiX3JlZiIsIm5hbWVFbGVtZW50Iiwiam9iRWxlbWVudCIsImltYWdlbkVsZW1lbnQiLCJqb2IiLCJpbWFnZW4iLCJfcmVmMiIsIm5JZFVzZXIiLCJQb3BVcERlbGV0ZUltYWdlIiwiX2hhbmRsZUltYWdlRm9ybURlbGV0ZSIsImhhbmRsZUFjdGlvbiIsIl90aGlzMiIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwicGxhY2VJbnB1dCIsImltYWdlVXJsSW5wdXQiLCJhdmF0YXJJbnB1dCIsImdyaWQiLCJhcGkiLCJhdXRob3JpemF0aW9uIiwiZ2V0SW5pdGlhbFVzZXJNZSIsImRhdGEiLCJjVXNlckluZm8iLCJzZXRVc2VySW5mbyIsImdldFVzZXJJbmZvIiwiZ2V0SW5pdGlhbENhcmRzIiwiY3JlYXRlQ2FyZCIsImVDb250YWluZXIiLCJpZFVzZXIiLCJmb3JtRWxlbWVudCIsImVuYWJsZVZhbGlkYXRpb24iLCJyZW5kZXJHYWxsZXJ5IiwidXBkYXRlVXNlck1lQXZhdGFyIiwicGF0Y2hJbml0aWFsVXNlck1lIiwicG9zdE5ld0NhcmQiLCJwb3B1cERlbGV0ZUltYWdlIiwib1Byb3BlcnRpZXMiLCJjYXJkIiwib3duZXIiLCJuSWRDYXJkIiwic2V0SGFuZGxlSW1hZ2VGb3JtRGVsZXRlIiwiZGVsZXRlQ2FyZCIsIl9kZWxldGVDYXJkIiwicHV0TGlrZUJ1dHRvbkNhcmQiLCJoYW5kbGVBZGRMaWtlIiwiZGVsZXRlTGlrZUJ1dHRvbkNhcmQiLCJoYW5kbGVSZW1vdmVMaWtlIiwiYXBwZW5kIiwiZ2VuZXJhdGVDYXJkIiwic2V0RXZlbnRMaXN0ZW5lcnMiXSwic291cmNlUm9vdCI6IiJ9